---
import BaseLayout from '../layouts/BaseLayout.astro';
import fs from 'node:fs';
import path from 'node:path';

// Fonction pour lire le contenu des dossiers de catégories
async function getCategoryContent() {
  const categories = [
    { slug: 'glp1-cout', name: 'Prix et Où Acheter', icon: '💰', description: 'Prix Ozempic/Wegovy, remboursements et pharmacies en France' },
    { slug: 'medicaments-glp1', name: 'Ozempic vs Wegovy', icon: '💊', description: 'Différences, posologie et lequel choisir selon votre situation' },
    { slug: 'glp1-perte-de-poids', name: 'Perdre du Poids', icon: '📉', description: 'Résultats réels, témoignages et avant/après avec Ozempic & Wegovy' },
    { slug: 'effets-secondaires-glp1', name: 'Effets Secondaires', icon: '⚠️', description: 'Nausées, fatigue : comment gérer les effets secondaires' },
    { slug: 'glp1-diabete', name: 'Diabète et Ozempic', icon: '🩺', description: 'Utilisation d\'Ozempic pour le diabète : efficacité et suivi' },
    { slug: 'regime-glp1', name: 'Que Manger', icon: '🥗', description: 'Alimentation adaptée pendant un traitement Ozempic/Wegovy' },
    { slug: 'alternatives-glp1', name: 'Autres Solutions', icon: '🌿', description: 'Alternatives naturelles et autres médicaments pour maigrir' },
    { slug: 'medecins-glp1-france', name: 'Trouver un Médecin', icon: '👨‍⚕️', description: 'Médecins qui prescrivent Ozempic/Wegovy près de chez vous' },
    { slug: 'recherche-glp1', name: 'Études et Nouveautés', icon: '🔬', description: 'Dernières études scientifiques et innovations médicamenteuses' }
  ];

  // Ensure Astro.root is available and fallback to process.cwd()
  const astroRoot = Astro.root || process.cwd();
  const contentPath = path.resolve(astroRoot, 'src', 'content');
  
  for (const category of categories) {
    try {
      const categoryPath = path.join(contentPath, category.slug);
      if (fs.existsSync(categoryPath)) {
        const files = fs.readdirSync(categoryPath);
        category.articleCount = files.filter(file => file.endsWith('.md')).length;
      } else {
        category.articleCount = 0;
      }
    } catch (error) {
      category.articleCount = 0;
    }
  }
  
  return categories;
}

const categories = await getCategoryContent();
---

<BaseLayout 
  title="Ozempic & Wegovy France – Guide Complet Perte de Poids 2025"
  description="Tout sur Ozempic et Wegovy en France : prix, efficacité, où les acheter, effets secondaires. Guide complet des nouveaux médicaments pour maigrir."
  keywords="Ozempic, Wegovy, médicament pour maigrir, perte de poids, prix France, diabète, où acheter"
>
  <div class="container">
    <!-- Timestamp de déploiement pour forcer la mise à jour du cache -->
    <!-- Deploy: 2025-08-13-16:05 -->
    
    <!-- Hero Section Amélioré -->
    <section class="hero-enhanced">
      <div class="hero-content">
        <h1 class="hero-title">
          Ozempic & Wegovy en France :<br><span class="text-gradient">Le Guide Complet</span>
        </h1>
        <p class="hero-description">
          Découvrez tout sur ces nouveaux médicaments révolutionnaires pour <strong class="highlight-weight-loss">perdre du poids</strong> et traiter le diabète : 
          prix en France, où les acheter, efficacité réelle, effets secondaires et conseils d'experts.
        </p>
        <div class="hero-pills">
          <a href="/qu-est-ce-que-glp1/" class="pill pill-link">✅ Ozempic & Wegovy expliqués</a>
          <a href="/glp1-cout/wegovy-prix/" class="pill pill-link">💰 Prix & Remboursement</a>
          <a href="/glp1-cout/acheter-wegovy-en-france/" class="pill pill-link">🏥 Où les acheter légalement</a>
        </div>
        <div class="hero-actions">
          <a href="/quel-traitement-glp1-choisir/" class="btn btn-primary btn-lg">🎯 Faire le Diagnostic (2 min)</a>
          <a href="/articles/" class="btn btn-outline btn-lg">📚 Lire les Articles</a>
        </div>
        <div class="hero-stats">
          <div class="stat">
            <span class="stat-number">50+</span>
            <span class="stat-label">Articles Experts</span>
          </div>
          <div class="stat">
            <span class="stat-number">4</span>
            <span class="stat-label">Auteurs Spécialisés</span>
          </div>
          <div class="stat">
            <span class="stat-number">100%</span>
            <span class="stat-label">Contenu Français</span>
          </div>
        </div>
      </div>
      <div class="hero-visual">
        <img src="/images/uploads/Diagnostic.png" alt="Diagnostic GLP-1 personnalisé" class="hero-image" loading="lazy">
        <div class="hero-badge">
          <span class="badge-text">🎯 Test Gratuit</span>
        </div>
      </div>
    </section>

    <!-- Bridge Section avec Image -->
    <section class="bridge-section-enhanced">
      <div class="bridge-content">
        <div class="bridge-visual">
          <img src="/images/uploads/seringue-adn.png" alt="Molécule GLP-1" class="bridge-image" loading="lazy">
        </div>
        <div class="bridge-text-content">
          <h2 class="bridge-title">Ozempic, Wegovy... Que signifie GLP-1 ?</h2>
          <p class="bridge-text">
            <strong>Ozempic et Wegovy</strong> sont les noms commerciaux de médicaments appartenant à une famille appelée <strong>"GLP-1"</strong>. 
            Ces traitements révolutionnaires imitent une hormone naturelle pour réguler la glycémie et réduire l'appétit.
          </p>
          <div class="bridge-pills">
            <span class="bridge-pill">💊 Ozempic = Pour le diabète + perte de poids</span>
            <span class="bridge-pill">📉 Wegovy = Spécialement pour maigrir</span>
            <span class="bridge-pill">🧬 GLP-1 = La famille de molécules</span>
          </div>
          <a href="/qu-est-ce-que-glp1/" class="btn btn-outline">En savoir plus sur GLP-1</a>
        </div>
      </div>
    </section>

    <!-- Section Témoignages Visuels -->
    <section class="testimonials-visual">
      <div class="section-header">
        <h2 class="section-title">Des Résultats Réels Qui Parlent</h2>
        <p class="section-description">
          Découvrez les transformations authentiques de nos utilisateurs français
        </p>
      </div>
      
      <div class="testimonials-grid">
        <div class="testimonial-card">
          <img src="/images/uploads/marie-journey8.png" alt="Transformation avec GLP-1" class="testimonial-image" loading="lazy">
          <div class="testimonial-content">
            <h3 class="testimonial-name">Marie, 34 ans</h3>
            <p class="testimonial-result">-18kg en 8 mois</p>
            <p class="testimonial-text">"Après 3 grossesses, je n'arrivais plus à perdre du poids. Wegovy a changé ma vie."</p>
            <div class="testimonial-location">📍 Lyon</div>
          </div>
        </div>
        
        <div class="testimonial-card">
          <img src="/images/uploads/Laurent-journey.png" alt="Témoignage homme GLP-1" class="testimonial-image" loading="lazy">
          <div class="testimonial-content">
            <h3 class="testimonial-name">Laurent, 42 ans</h3>
            <p class="testimonial-result">-22kg en 10 mois</p>
            <p class="testimonial-text">"Diabétique depuis 10 ans, Ozempic m'a aidé à contrôler ma glycémie ET à maigrir."</p>
            <div class="testimonial-location">📍 Marseille</div>
          </div>
        </div>
        
        <div class="testimonial-card">
          <img src="/images/uploads/journey-femme-5.png" alt="Avant après Wegovy" class="testimonial-image" loading="lazy">
          <div class="testimonial-content">
            <h3 class="testimonial-name">Sophie, 29 ans</h3>
            <p class="testimonial-result">-15kg en 6 mois</p>
            <p class="testimonial-text">"J'avais tout essayé. Les GLP-1 ont été ma solution miracle sans privation."</p>
            <div class="testimonial-location">📍 Paris</div>
          </div>
        </div>
      </div>
      
      <div class="testimonials-cta">
        <a href="/glp1-perte-de-poids/avant-apres-glp1/" class="btn btn-secondary">Voir Plus de Témoignages</a>
      </div>
    </section>

    <!-- Categories Grid -->
    <section id="categories" class="categories-section">
      <div class="section-header">
        <h2 class="section-title">Tout Savoir sur Ozempic & Wegovy</h2>
        <p class="section-description">
          Guides détaillés par nos experts médicaux pour comprendre ces nouveaux médicaments révolutionnaires.
        </p>
      </div>
      
      <div class="grid grid-3">
        {categories.map((category) => (
          <a href={`/${category.slug}/`} class="category-card">
            <div class="category-icon">{category.icon}</div>
            <h3 class="category-title">{category.name}</h3>
            <p class="category-description">{category.description}</p>
            <div class="category-meta">
              <span class="article-count">{category.articleCount} articles</span>
              <span class="read-more">Lire →</span>
            </div>
          </a>
        ))}
      </div>
    </section>

    <!-- FAQ Section avec Diagnostic -->
    <section class="faq-section">
      <div class="section-header">
        <h2 class="section-title">🎯 Vous vous posez ces questions ?</h2>
      </div>
      
      <div class="faq-grid">
        <div class="faq-item">
          <div class="faq-icon">💰</div>
          <h3>Combien ça coûte ?</h3>
          <p>Prix, remboursement, budget mensuel</p>
        </div>
        
        <div class="faq-item">
          <div class="faq-icon">📊</div>
          <h3>Ça marche vraiment ?</h3>
          <p>Efficacité, résultats réels, témoignages</p>
        </div>
        
        <div class="faq-item">
          <div class="faq-icon">⚠️</div>
          <h3>C'est dangereux ?</h3>
          <p>Effets secondaires, contre-indications</p>
        </div>
        
        <div class="faq-item">
          <div class="faq-icon">🏥</div>
          <h3>Comment l'obtenir ?</h3>
          <p>Prescription, médecins, démarches</p>
        </div>
      </div>
      
      <div class="diagnostic-cta">
        <a href="/quel-traitement-glp1-choisir/" class="btn-diagnostic">
          🎯 Diagnostic Personnalisé (5 min)
        </a>
        <p class="diagnostic-subtitle">Découvrez quel traitement est fait pour vous</p>
      </div>
    </section>

    <!-- Trust Indicators -->
    <section class="trust-section">
      <div class="trust-grid">
        <div class="trust-item">
          <div class="trust-icon">✅</div>
          <h4>Informations Vérifiées</h4>
          <p>Contenu validé par des professionnels de santé français</p>
        </div>
        <div class="trust-item">
          <div class="trust-icon">🇫🇷</div>
          <h4>Spécialisé France</h4>
          <p>Prix français, pharmacies, médecins et remboursements selon notre système de santé</p>
        </div>
        <div class="trust-item">
          <div class="trust-icon">📊</div>
          <h4>Informations Actualisées</h4>
          <p>Prix Ozempic/Wegovy et disponibilités mises à jour chaque semaine</p>
        </div>
        <div class="trust-item">
          <div class="trust-icon">💬</div>
          <h4>Témoignages Réels</h4>
          <p>Retours d'expérience authentiques de patients français</p>
        </div>
      </div>
    </section>
  </div>

  <style>
    /* Hero Section Amélioré */
    .hero-enhanced {
      display: grid;
      grid-template-columns: 2fr 1fr;
      gap: 3rem;
      align-items: center;
      padding: var(--spacing-16) 0 var(--spacing-12);
      background: linear-gradient(135deg, var(--gray-50) 0%, white 100%);
      border-radius: var(--radius-2xl);
      margin-bottom: var(--spacing-12);
    }

    .hero-content {
      padding-left: 2rem;
    }

    .hero-visual {
      position: relative;
      text-align: center;
    }

    .hero-image {
      max-width: 100%;
      height: auto;
      border-radius: var(--radius-lg);
      box-shadow: 0 10px 30px rgba(0, 0, 0, 0.1);
    }

    .hero-badge {
      position: absolute;
      top: -10px;
      right: -10px;
      background: var(--accent-green);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: var(--radius-full);
      font-size: 0.8rem;
      font-weight: 600;
      box-shadow: 0 4px 12px rgba(34, 197, 94, 0.3);
    }

    .hero-title {
      font-size: var(--font-size-5xl);
      font-weight: 800;
      margin-bottom: var(--spacing-6);
      line-height: 1.1;
      text-align: left;
    }

    .text-gradient {
      background: linear-gradient(135deg, var(--primary-blue), var(--accent-green));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .hero-description {
      font-size: var(--font-size-xl);
      color: var(--gray-600);
      margin-bottom: var(--spacing-6);
      line-height: 1.6;
      text-align: left;
    }

    /* Pills cliquables */
    .hero-pills {
      display: flex;
      gap: var(--spacing-3);
      margin-bottom: var(--spacing-8);
      flex-wrap: wrap;
    }

    .pill {
      background: var(--gray-100);
      color: var(--gray-700);
      padding: var(--spacing-2) var(--spacing-4);
      border-radius: var(--radius-full);
      font-size: var(--font-size-sm);
      font-weight: 500;
      text-decoration: none;
      transition: all 0.3s ease;
    }

    .pill-link:hover {
      background: var(--primary-blue);
      color: white;
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.3);
    }

    .hero-actions {
      display: flex;
      gap: var(--spacing-4);
      margin-bottom: var(--spacing-12);
      flex-wrap: wrap;
    }

    .hero-stats {
      display: flex;
      gap: var(--spacing-8);
      flex-wrap: wrap;
    }

    .stat {
      text-align: left;
    }

    .stat-number {
      display: block;
      font-size: var(--font-size-3xl);
      font-weight: 800;
      color: var(--primary-blue);
    }

    .stat-label {
      font-size: var(--font-size-sm);
      color: var(--gray-500);
      font-weight: 500;
    }

    /* Bridge Section Améliorée */
    .bridge-section-enhanced {
      background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
      border-radius: var(--radius-2xl);
      padding: var(--spacing-12) var(--spacing-8);
      margin-bottom: var(--spacing-16);
    }

    .bridge-content {
      display: grid;
      grid-template-columns: 1fr 2fr;
      gap: 3rem;
      align-items: center;
      max-width: 1200px;
      margin: 0 auto;
    }

    .bridge-visual {
      text-align: center;
    }

    .bridge-image {
      max-width: 100%;
      height: auto;
      filter: drop-shadow(0 10px 20px rgba(0, 0, 0, 0.1));
    }

    .bridge-title {
      font-size: var(--font-size-3xl);
      font-weight: 700;
      margin-bottom: var(--spacing-6);
      color: var(--gray-900);
    }

    .bridge-text {
      font-size: var(--font-size-lg);
      color: var(--gray-600);
      line-height: 1.6;
      margin-bottom: var(--spacing-6);
    }

    .bridge-pills {
      display: flex;
      flex-direction: column;
      gap: var(--spacing-3);
      margin-bottom: var(--spacing-6);
    }

    .bridge-pill {
      background: white;
      color: var(--gray-700);
      padding: var(--spacing-3) var(--spacing-4);
      border-radius: var(--radius-lg);
      font-size: var(--font-size-sm);
      font-weight: 500;
      box-shadow: 0 2px 4px rgba(0, 0, 0, 0.05);
    }

    /* Témoignages Visuels */
    .testimonials-visual {
      padding: var(--spacing-16) 0;
      background: linear-gradient(135deg, #fefefe 0%, #f8fafc 100%);
      border-radius: var(--radius-2xl);
      margin-bottom: var(--spacing-12);
    }

    .testimonials-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 2rem;
      margin-bottom: 3rem;
    }

    .testimonial-card {
      background: white;
      border-radius: var(--radius-xl);
      overflow: hidden;
      box-shadow: 0 4px 20px rgba(0, 0, 0, 0.08);
      transition: transform 0.3s ease, box-shadow 0.3s ease;
    }

    .testimonial-card:hover {
      transform: translateY(-5px);
      box-shadow: 0 8px 30px rgba(0, 0, 0, 0.12);
    }

    .testimonial-image {
      width: 100%;
      height: 200px;
      object-fit: cover;
    }

    .testimonial-content {
      padding: 1.5rem;
    }

    .testimonial-name {
      font-size: 1.1rem;
      font-weight: 600;
      margin-bottom: 0.5rem;
      color: var(--gray-900);
    }

    .testimonial-result {
      color: var(--accent-green);
      font-weight: 700;
      font-size: 1.1rem;
      margin-bottom: 1rem;
    }

    .testimonial-text {
      color: var(--gray-600);
      line-height: 1.5;
      margin-bottom: 1rem;
      font-style: italic;
    }

    .testimonial-location {
      color: var(--gray-500);
      font-size: 0.9rem;
    }

    .testimonials-cta {
      text-align: center;
    }

    /* Categories Grid - styles existants */
    .categories-section {
      margin: var(--spacing-16) 0;
    }

    .section-header {
      text-align: center;
      margin-bottom: var(--spacing-12);
    }

    .section-title {
      font-size: var(--font-size-3xl);
      font-weight: 700;
      margin-bottom: var(--spacing-4);
      color: var(--gray-900);
    }

    .section-description {
      font-size: var(--font-size-lg);
      color: var(--gray-600);
      max-width: 600px;
      margin: 0 auto;
    }

    .grid-3 {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: var(--spacing-6);
    }

    .category-card {
      background: white;
      border: 1px solid var(--gray-200);
      border-radius: var(--radius-xl);
      padding: var(--spacing-6);
      text-decoration: none;
      color: inherit;
      transition: all 0.3s ease;
      position: relative;
      overflow: hidden;
    }

    .category-card:hover {
      border-color: var(--primary-blue);
      transform: translateY(-4px);
      box-shadow: 0 8px 25px rgba(59, 130, 246, 0.15);
    }

    .category-icon {
      font-size: var(--font-size-3xl);
      margin-bottom: var(--spacing-4);
    }

    .category-title {
      font-size: var(--font-size-xl);
      font-weight: 600;
      margin-bottom: var(--spacing-3);
      color: var(--gray-900);
    }

    .category-description {
      color: var(--gray-600);
      line-height: 1.5;
      margin-bottom: var(--spacing-4);
    }

    .category-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: var(--font-size-sm);
    }

    .article-count {
      color: var(--gray-500);
    }

    .read-more {
      color: var(--primary-blue);
      font-weight: 500;
    }

    /* FAQ Section */
    .faq-section {
      background: linear-gradient(135deg, var(--gray-50) 0%, white 100%);
      border-radius: var(--radius-2xl);
      padding: var(--spacing-12);
      margin: var(--spacing-16) 0;
      text-align: center;
    }

    .faq-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(200px, 1fr));
      gap: var(--spacing-6);
      margin-bottom: var(--spacing-8);
    }

    .faq-item {
      text-align: center;
    }

    .faq-icon {
      font-size: var(--font-size-3xl);
      margin-bottom: var(--spacing-3);
    }

    .faq-item h3 {
      font-size: var(--font-size-lg);
      font-weight: 600;
      margin-bottom: var(--spacing-2);
      color: var(--gray-900);
    }

    .faq-item p {
      color: var(--gray-600);
      font-size: var(--font-size-sm);
    }

    .diagnostic-cta {
      margin-top: var(--spacing-8);
    }

    .btn-diagnostic {
      display: inline-block;
      background: linear-gradient(135deg, var(--primary-blue), var(--accent-green));
      color: white;
      padding: var(--spacing-4) var(--spacing-8);
      border-radius: var(--radius-full);
      text-decoration: none;
      font-weight: 600;
      font-size: var(--font-size-lg);
      transition: all 0.3s ease;
      box-shadow: 0 4px 15px rgba(59, 130, 246, 0.3);
    }

    .btn-diagnostic:hover {
      transform: translateY(-2px);
      box-shadow: 0 6px 20px rgba(59, 130, 246, 0.4);
    }

    .diagnostic-subtitle {
      margin-top: var(--spacing-3);
      color: var(--gray-600);
      font-size: var(--font-size-sm);
    }

    /* Trust Section */
    .trust-section {
      margin: var(--spacing-16) 0;
    }

    .trust-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: var(--spacing-6);
    }

    .trust-item {
      text-align: center;
      padding: var(--spacing-6);
      background: white;
      border-radius: var(--radius-lg);
      border: 1px solid var(--gray-200);
    }

    .trust-icon {
      font-size: var(--font-size-2xl);
      margin-bottom: var(--spacing-3);
    }

    .trust-item h4 {
      font-size: var(--font-size-lg);
      font-weight: 600;
      margin-bottom: var(--spacing-2);
      color: var(--gray-900);
    }

    .trust-item p {
      color: var(--gray-600);
      font-size: var(--font-size-sm);
      line-height: 1.5;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .hero-enhanced {
        grid-template-columns: 1fr;
        text-align: center;
      }

      .hero-content {
        padding-left: 0;
      }

      .hero-title, .hero-description, .hero-stats {
        text-align: center;
      }

      .bridge-content {
        grid-template-columns: 1fr;
        text-align: center;
      }

      .testimonials-grid {
        grid-template-columns: 1fr;
      }

      .hero-pills, .hero-actions {
        justify-content: center;
      }
    }
  </style>
</BaseLayout>

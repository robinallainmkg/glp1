---
import BaseLayout from '../layouts/BaseLayout.astro';
import fs from 'node:fs';
import path from 'node:path';

// Fonction pour lire le contenu des dossiers de cat√©gories
async function getCategoryContent() {
  const categories = [
    { slug: 'glp1-cout', name: 'Prix et O√π Acheter', icon: 'üí∞', description: 'Prix Ozempic/Wegovy, remboursements et pharmacies en France' },
    { slug: 'medicaments-glp1', name: 'Ozempic vs Wegovy', icon: 'üíä', description: 'Diff√©rences, posologie et lequel choisir selon votre situation' },
    { slug: 'glp1-perte-de-poids', name: 'Perdre du Poids', icon: 'üìâ', description: 'R√©sultats r√©els, t√©moignages et avant/apr√®s avec Ozempic & Wegovy' },
    { slug: 'effets-secondaires-glp1', name: 'Effets Secondaires', icon: '‚ö†Ô∏è', description: 'Naus√©es, fatigue : comment g√©rer les effets secondaires' },
    { slug: 'glp1-diabete', name: 'Diab√®te et Ozempic', icon: 'ü©∫', description: 'Utilisation d\'Ozempic pour le diab√®te : efficacit√© et suivi' },
    { slug: 'regime-glp1', name: 'Que Manger', icon: 'ü•ó', description: 'Alimentation adapt√©e pendant un traitement Ozempic/Wegovy' },
    { slug: 'alternatives-glp1', name: 'Autres Solutions', icon: 'üåø', description: 'Alternatives naturelles et autres m√©dicaments pour maigrir' },
    { slug: 'medecins-glp1-france', name: 'Trouver un M√©decin', icon: 'üë®‚Äç‚öïÔ∏è', description: 'M√©decins qui prescrivent Ozempic/Wegovy pr√®s de chez vous' },
    { slug: 'recherche-glp1', name: '√âtudes et Nouveaut√©s', icon: 'üî¨', description: 'Derni√®res √©tudes scientifiques et innovations m√©dicamenteuses' }
  ];

  // Ensure Astro.root is available and fallback to process.cwd()
  const astroRoot = Astro.root || process.cwd();
  const contentPath = path.resolve(astroRoot, 'src', 'content');
  
  for (const category of categories) {
    try {
      const categoryPath = path.join(contentPath, category.slug);
      if (fs.existsSync(categoryPath)) {
        const files = fs.readdirSync(categoryPath);
        category.articleCount = files.filter(file => file.endsWith('.md')).length;
      } else {
        category.articleCount = 0;
      }
    } catch (error) {
      category.articleCount = 0;
    }
  }
  
  return categories;
}

const categories = await getCategoryContent();
---

<BaseLayout 
  title="Ozempic & Wegovy France ‚Äì Guide Complet Perte de Poids 2025"
  description="Tout sur Ozempic et Wegovy en France : prix, efficacit√©, o√π les acheter, effets secondaires. Guide complet des nouveaux m√©dicaments pour maigrir."
  keywords="Ozempic, Wegovy, m√©dicament pour maigrir, perte de poids, prix France, diab√®te, o√π acheter"
>
  <div class="container">
    <!-- Hero Section -->
    <section class="hero">
      <div class="hero-content">
        <h1 class="hero-title">
          Ozempic & Wegovy en France :<br><span class="text-gradient">Le Guide Complet</span>
        </h1>
        <p class="hero-description">
          D√©couvrez tout sur ces nouveaux m√©dicaments r√©volutionnaires pour <strong class="highlight-weight-loss">perdre du poids</strong> et traiter le diab√®te : 
          prix en France, o√π les acheter, efficacit√© r√©elle, effets secondaires et conseils d'experts.
        </p>
        <div class="hero-pills">
          <span class="pill">‚úÖ Ozempic & Wegovy expliqu√©s</span>
          <span class="pill">üí∞ Prix & Remboursement</span>
          <span class="pill">üè• O√π les acheter l√©galement</span>
        </div>
        <div class="hero-actions">
          <a href="/quel-traitement-glp1-choisir/" class="btn btn-primary btn-lg">üéØ Faire le Diagnostic (2 min)</a>
          <a href="/articles/" class="btn btn-outline btn-lg">üìö Lire les Articles</a>
        </div>
        <div class="hero-stats">
          <div class="stat">
            <span class="stat-number">50+</span>
            <span class="stat-label">Articles Experts</span>
          </div>
          <div class="stat">
            <span class="stat-number">4</span>
            <span class="stat-label">Auteurs Sp√©cialis√©s</span>
          </div>
          <div class="stat">
            <span class="stat-number">100%</span>
            <span class="stat-label">Contenu Fran√ßais</span>
          </div>
        </div>
      </div>
    </section>

    <!-- Bridge Section - Explication GLP-1 -->
    <section class="bridge-section">
      <div class="bridge-content">
        <h2 class="bridge-title">Ozempic, Wegovy... Que signifie GLP-1 ?</h2>
        <div class="bridge-grid">
          <div class="bridge-explanation">
            <p class="bridge-text">
              <strong>Ozempic et Wegovy</strong> sont les noms commerciaux de m√©dicaments appartenant √† une famille appel√©e <strong>"GLP-1"</strong>. 
              Ces traitements r√©volutionnaires imitent une hormone naturelle pour r√©guler la glyc√©mie et r√©duire l'app√©tit.
            </p>
            <div class="bridge-pills">
              <span class="bridge-pill">üíä Ozempic = Pour le diab√®te + perte de poids</span>
              <span class="bridge-pill">üìâ Wegovy = Sp√©cialement pour maigrir</span>
              <span class="bridge-pill">üß¨ GLP-1 = La famille de mol√©cules</span>
            </div>
          </div>
          <div class="bridge-visual">
            <div class="med-comparison">
              <div class="med-item">
                <span class="med-name">Ozempic</span>
                <span class="med-arrow">‚Üí</span>
                <span class="med-molecule">S√©maglutide (GLP-1)</span>
              </div>
              <div class="med-item">
                <span class="med-name">Wegovy</span>
                <span class="med-arrow">‚Üí</span>
                <span class="med-molecule">S√©maglutide (GLP-1)</span>
              </div>
              <div class="med-item">
                <span class="med-name">Trulicity</span>
                <span class="med-arrow">‚Üí</span>
                <span class="med-molecule">Dulaglutide (GLP-1)</span>
              </div>
            </div>
          </div>
        </div>
      </div>

    <!-- Categories Grid -->
    <section id="categories" class="categories-section" style="margin-top: 4rem;">
      <div class="section-header">
        <h2 class="section-title">Tout Savoir sur Ozempic & Wegovy</h2>
        <p class="section-description">
          Guides d√©taill√©s par nos experts m√©dicaux pour comprendre ces nouveaux m√©dicaments r√©volutionnaires.
        </p>
      </div>
      
      <div class="grid grid-3">
        {categories.map((category) => (
          <a href={`/${category.slug}/`} class="category-card">
            <div class="category-icon">{category.icon}</div>
            <h3 class="category-title">{category.name}</h3>
            <p class="category-description">{category.description}</p>
            <div class="category-meta">
              <span class="article-count">{category.articleCount} articles</span>
              <span class="read-more">Lire ‚Üí</span>
            </div>
          </a>
        ))}
      </div>
    </section>

    <!-- Featured Articles -->
    <section class="featured-section">
      <div class="section-header">
        <h2 class="section-title">Articles les Plus Consult√©s</h2>
        <p class="section-description">
          Les sujets qui int√©ressent le plus nos lecteurs fran√ßais
        </p>
      </div>
      
      <div class="grid grid-2">
        <article class="featured-article">
          <div class="article-inner">
            <div class="article-category">Prix & Achat</div>
            <h3 class="article-title">
              <a href="/glp1-cout/acheter-wegovy-en-france/">Comment Acheter Wegovy en France en 2025</a>
            </h3>
            <p class="article-excerpt">
              Guide complet pour acheter Wegovy l√©galement en France : prix, ordonnance, pharmacies et remboursement.
            </p>
            <div class="article-meta">
              <span class="author">Dr. √âmilie Martin</span>
              <span class="reading-time">8 min de lecture</span>
            </div>
          </div>
        </article>
        
        <article class="featured-article">
          <div class="article-inner">
            <div class="article-category">Perte de Poids</div>
            <h3 class="article-title">
              <a href="/glp1-perte-de-poids/avant-apres-glp1/">R√©sultats Avant/Apr√®s : T√©moignages GLP-1</a>
            </h3>
            <p class="article-excerpt">
              D√©couvrez les t√©moignages r√©els d'utilisateurs fran√ßais avec photos avant/apr√®s et conseils.
            </p>
            <div class="article-meta">
              <span class="author">Julien Lef√®vre</span>
              <span class="reading-time">12 min de lecture</span>
            </div>
          </div>
        </article>
        
        <article class="featured-article">
          <div class="article-inner">
            <div class="article-category">M√©dicaments</div>
            <h3 class="article-title">
              <a href="/medicaments-glp1/ozempic-posologie/">Ozempic : Posologie et Mode d'Emploi</a>
            </h3>
            <p class="article-excerpt">
              Tout savoir sur la posologie d'Ozempic : doses, injection, pr√©cautions et suivi m√©dical.
            </p>
            <div class="article-meta">
              <span class="author">Dr. √âmilie Martin</span>
              <span class="reading-time">10 min de lecture</span>
            </div>
          </div>
        </article>
        
        <article class="featured-article">
          <div class="article-inner">
            <div class="article-category">Effets Secondaires</div>
            <h3 class="article-title">
              <a href="/effets-secondaires-glp1/effets-secondaires-wegovy/">Effets Secondaires Wegovy : Guide Complet</a>
            </h3>
            <p class="article-excerpt">
              Comprendre, pr√©venir et g√©rer les effets secondaires de Wegovy avec nos conseils d'experts.
            </p>
            <div class="article-meta">
              <span class="author">Dr. √âmilie Martin</span>
              <span class="reading-time">15 min de lecture</span>
            </div>
          </div>
        </article>
      </div>
    </section>

    <!-- FAQ Section avec Diagnostic -->
    <section class="faq-section">
      <div class="section-header">
        <h2 class="section-title">üéØ Vous vous posez ces questions ?</h2>
      </div>
      
      <div class="faq-grid">
        <div class="faq-item">
          <div class="faq-icon">üí∞</div>
          <h3>Combien √ßa co√ªte ?</h3>
          <p>Prix, remboursement, budget mensuel</p>
        </div>
        
        <div class="faq-item">
          <div class="faq-icon">üìä</div>
          <h3>√áa marche vraiment ?</h3>
          <p>Efficacit√©, r√©sultats r√©els, t√©moignages</p>
        </div>
        
        <div class="faq-item">
          <div class="faq-icon">‚ö†Ô∏è</div>
          <h3>C'est dangereux ?</h3>
          <p>Effets secondaires, contre-indications</p>
        </div>
        
        <div class="faq-item">
          <div class="faq-icon">üè•</div>
          <h3>Comment l'obtenir ?</h3>
          <p>Prescription, m√©decins, d√©marches</p>
        </div>
      </div>
      
      <div class="diagnostic-cta">
        <a href="/quel-traitement-glp1-choisir/" class="btn-diagnostic">
          üéØ Diagnostic Personnalis√© (5 min)
        </a>
        <p class="diagnostic-subtitle">D√©couvrez quel traitement est fait pour vous</p>
      </div>
    </section>

    <!-- CTA Section -->
    <section class="cta-section">
      <div class="cta-content">
        <h2 class="cta-title">Restez Inform√© sur Ozempic & Wegovy</h2>
        <p class="cta-description">
          Recevez les derni√®res actualit√©s, nouveaux prix, et conseils pratiques 
          sur ces m√©dicaments r√©volutionnaires directement dans votre bo√Æte mail.
        </p>
        <form class="newsletter-form-home" action="#" method="post">
          <input type="email" placeholder="Votre adresse email" class="newsletter-input-home" required>
          <button type="submit" class="btn btn-secondary">S'abonner Gratuitement</button>
        </form>
        <p class="cta-privacy">
          üîí Vos donn√©es sont s√©curis√©es. D√©sinscription possible √† tout moment.
        </p>
      </div>
    </section>

    <!-- Trust Indicators -->
    <section class="trust-section">
      <div class="trust-grid">
        <div class="trust-item">
          <div class="trust-icon">‚úÖ</div>
          <h4>Informations V√©rifi√©es</h4>
          <p>Contenu valid√© par des professionnels de sant√© fran√ßais</p>
        </div>
        <div class="trust-item">
          <div class="trust-icon">üá´üá∑</div>
          <h4>Sp√©cialis√© France</h4>
          <p>Prix fran√ßais, pharmacies, m√©decins et remboursements selon notre syst√®me de sant√©</p>
        </div>
        <div class="trust-item">
          <div class="trust-icon">üìä</div>
          <h4>Informations Actualis√©es</h4>
          <p>Prix Ozempic/Wegovy et disponibilit√©s mises √† jour chaque semaine</p>
        </div>
        <div class="trust-item">
          <div class="trust-icon">üí¨</div>
          <h4>T√©moignages R√©els</h4>
          <p>Retours d'exp√©rience authentiques de patients fran√ßais</p>
        </div>
      </div>
    </section>
  </div>

  <style>
    /* Hero Section */
    .hero {
      text-align: center;
      padding: var(--spacing-16) 0 var(--spacing-12);
      background: linear-gradient(135deg, var(--gray-50) 0%, white 100%);
      border-radius: var(--radius-2xl);
      margin-bottom: var(--spacing-12);
    }

    .hero-title {
      font-size: var(--font-size-5xl);
      font-weight: 800;
      margin-bottom: var(--spacing-6);
      line-height: 1.1;
    }

    .text-gradient {
      background: linear-gradient(135deg, var(--primary-blue), var(--accent-green));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .hero-description {
      font-size: var(--font-size-xl);
      color: var(--gray-600);
      max-width: 800px;
      margin: 0 auto var(--spacing-6);
      line-height: 1.6;
    }

    .hero-pills {
      display: flex;
      gap: var(--spacing-3);
      justify-content: center;
      margin-bottom: var(--spacing-8);
      flex-wrap: wrap;
    }

    .pill {
      background: var(--gray-100);
      color: var(--gray-700);
      padding: var(--spacing-2) var(--spacing-4);
      border-radius: var(--radius-full);
      font-size: var(--font-size-sm);
      font-weight: 500;
    }

    .hero-actions {
      display: flex;
      gap: var(--spacing-4);
      justify-content: center;
      margin-bottom: var(--spacing-12);
      flex-wrap: wrap;
    }

    .hero-stats {
      display: flex;
      gap: var(--spacing-8);
      justify-content: center;
      flex-wrap: wrap;
    }

    .stat {
      text-align: center;
    }

    .stat-number {
      display: block;
      font-size: var(--font-size-3xl);
      font-weight: 800;
      color: var(--primary-blue);
    }

    .stat-label {
      font-size: var(--font-size-sm);
      color: var(--gray-500);
      font-weight: 500;
    }

    /* Bridge Section */
    .bridge-section {
      background: linear-gradient(135deg, #f8fafc 0%, #e2e8f0 100%);
      border-radius: var(--radius-2xl);
      padding: var(--spacing-12) var(--spacing-8);
      margin-bottom: var(--spacing-16);
    }

    .bridge-title {
      text-align: center;
      font-size: var(--font-size-3xl);
      font-weight: 700;
      margin-bottom: var(--spacing-8);
      color: var(--gray-800);
    }

    .bridge-grid {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--spacing-8);
      align-items: center;
    }

    .bridge-text {
      font-size: var(--font-size-lg);
      line-height: 1.7;
      color: var(--gray-700);
      margin-bottom: var(--spacing-6);
    }

    .bridge-pills {
      display: flex;
      flex-direction: column;
      gap: var(--spacing-3);
    }

    .bridge-pill {
      background: white;
      color: var(--gray-700);
      padding: var(--spacing-3) var(--spacing-4);
      border-radius: var(--radius-lg);
      font-size: var(--font-size-sm);
      font-weight: 500;
      box-shadow: var(--shadow-sm);
    }

    .med-comparison {
      background: white;
      padding: var(--spacing-6);
      border-radius: var(--radius-xl);
      box-shadow: var(--shadow-md);
    }

    .med-item {
      display: flex;
      align-items: center;
      gap: var(--spacing-3);
      padding: var(--spacing-3) 0;
      border-bottom: 1px solid var(--gray-200);
    }

    .med-item:last-child {
      border-bottom: none;
    }

    .med-name {
      font-weight: 600;
      color: var(--primary-blue);
      min-width: 80px;
    }

    .med-arrow {
      color: var(--gray-400);
    }

    .med-molecule {
      font-size: var(--font-size-sm);
      color: var(--gray-600);
    }

    @media (max-width: 768px) {
      .bridge-grid {
        grid-template-columns: 1fr;
        gap: var(--spacing-6);
      }
    }

    /* Categories Section */
    .categories-section {
      margin-bottom: var(--spacing-16);
    }

    .section-header {
      text-align: center;
      margin-bottom: var(--spacing-12);
    }

    .section-title {
      font-size: var(--font-size-4xl);
      margin-bottom: var(--spacing-4);
    }

    .section-description {
      font-size: var(--font-size-lg);
      color: var(--gray-600);
      max-width: 600px;
      margin: 0 auto;
    }

    .category-card {
      background: white;
      border-radius: var(--radius-xl);
      padding: var(--spacing-8);
      text-decoration: none;
      color: inherit;
      border: 2px solid var(--gray-200);
      transition: var(--transition);
      display: block;
      height: 100%;
    }

    .category-card:hover {
      transform: translateY(-8px);
      box-shadow: var(--shadow-xl);
      border-color: var(--primary-blue);
      text-decoration: none;
      color: inherit;
    }

    .category-icon {
      font-size: var(--font-size-4xl);
      margin-bottom: var(--spacing-4);
    }

    .category-title {
      font-size: var(--font-size-xl);
      font-weight: 700;
      margin-bottom: var(--spacing-3);
      color: var(--gray-900);
    }

    .category-description {
      color: var(--gray-600);
      line-height: 1.6;
      margin-bottom: var(--spacing-5);
    }

    .category-meta {
      display: flex;
      justify-content: space-between;
      align-items: center;
      font-size: var(--font-size-sm);
    }

    .article-count {
      color: var(--gray-500);
      font-weight: 500;
    }

    .read-more {
      color: var(--primary-blue);
      font-weight: 600;
    }

    /* Featured Articles */
    .featured-section {
      margin-bottom: var(--spacing-16);
    }

    .featured-article {
      background: white;
      border-radius: var(--radius-xl);
      padding: var(--spacing-6);
      border: 1px solid var(--gray-200);
      transition: var(--transition);
    }

    .featured-article:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
    }

    .article-category {
      display: inline-block;
      background: var(--accent-green);
      color: white;
      padding: var(--spacing-1) var(--spacing-3);
      border-radius: var(--radius-full);
      font-size: var(--font-size-xs);
      font-weight: 600;
      text-transform: uppercase;
      letter-spacing: 0.5px;
      margin-bottom: var(--spacing-3);
    }

    .article-title {
      margin-bottom: var(--spacing-3);
    }

    .article-title a {
      color: var(--gray-900);
      text-decoration: none;
      font-weight: 600;
    }

    .article-title a:hover {
      color: var(--primary-blue);
    }

    .article-excerpt {
      color: var(--gray-600);
      line-height: 1.6;
      margin-bottom: var(--spacing-4);
    }

    .article-meta {
      display: flex;
      gap: var(--spacing-4);
      font-size: var(--font-size-sm);
      color: var(--gray-500);
    }

    .author {
      font-weight: 500;
    }

    /* FAQ Section */
    .faq-section {
      margin-bottom: var(--spacing-16);
      text-align: center;
    }

    .faq-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: var(--spacing-6);
      margin: var(--spacing-8) 0;
    }

    .faq-item {
      background: white;
      border-radius: var(--radius-xl);
      padding: var(--spacing-6);
      border: 2px solid var(--gray-200);
      transition: var(--transition);
    }

    .faq-item:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
      border-color: var(--primary-blue);
    }

    .faq-icon {
      font-size: var(--font-size-3xl);
      margin-bottom: var(--spacing-3);
    }

    .faq-item h3 {
      font-size: var(--font-size-lg);
      font-weight: 700;
      margin-bottom: var(--spacing-2);
      color: var(--gray-900);
    }

    .faq-item p {
      color: var(--gray-600);
      font-size: var(--font-size-sm);
      margin: 0;
    }

    .diagnostic-cta {
      margin-top: var(--spacing-8);
    }

    .btn-diagnostic {
      background: linear-gradient(135deg, var(--accent-green), var(--primary-blue));
      color: white;
      padding: var(--spacing-4) var(--spacing-8);
      border-radius: var(--radius-xl);
      text-decoration: none;
      font-size: var(--font-size-lg);
      font-weight: 700;
      display: inline-block;
      transition: var(--transition);
      border: none;
      cursor: pointer;
      box-shadow: var(--shadow-lg);
    }

    .btn-diagnostic:hover {
      transform: translateY(-2px);
      box-shadow: var(--shadow-xl);
      text-decoration: none;
      color: white;
    }

    .diagnostic-subtitle {
      color: var(--gray-600);
      font-size: var(--font-size-sm);
      margin: var(--spacing-2) 0 0 0;
    }

    /* CTA Section */
    .cta-section {
      background: linear-gradient(135deg, var(--primary-blue), var(--primary-blue-light));
      color: white;
      padding: var(--spacing-12);
      border-radius: var(--radius-2xl);
      text-align: center;
      margin-bottom: var(--spacing-16);
    }

    .cta-title {
      color: white;
      font-size: var(--font-size-3xl);
      margin-bottom: var(--spacing-4);
    }

    .cta-description {
      font-size: var(--font-size-lg);
      opacity: 0.9;
      max-width: 600px;
      margin: 0 auto var(--spacing-8);
    }

    .newsletter-form-home {
      display: flex;
      gap: var(--spacing-3);
      max-width: 500px;
      margin: 0 auto var(--spacing-4);
    }

    .newsletter-input-home {
      flex: 1;
      padding: var(--spacing-4);
      border: none;
      border-radius: var(--radius-lg);
      font-size: var(--font-size-base);
    }

    .cta-privacy {
      font-size: var(--font-size-sm);
      opacity: 0.8;
    }

    /* Trust Section */
    .trust-section {
      margin-bottom: var(--spacing-16);
    }

    .trust-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(250px, 1fr));
      gap: var(--spacing-6);
    }

    .trust-item {
      text-align: center;
      padding: var(--spacing-6);
    }

    .trust-icon {
      font-size: var(--font-size-3xl);
      margin-bottom: var(--spacing-4);
    }

    .trust-item h4 {
      font-size: var(--font-size-lg);
      font-weight: 600;
      margin-bottom: var(--spacing-2);
      color: var(--gray-900);
    }

    .trust-item p {
      color: var(--gray-600);
      font-size: var(--font-size-sm);
    }

    /* Highlight for weight loss text */
    .highlight-weight-loss {
      background: linear-gradient(135deg, var(--accent-green), #10b981);
      background-clip: text;
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      font-weight: 700;
    }

    /* Responsive */
    @media (max-width: 768px) {
      .hero-title {
        font-size: var(--font-size-3xl);
      }
      
      .hero-description {
        font-size: var(--font-size-lg);
      }
      
      .hero-actions {
        flex-direction: column;
        align-items: center;
      }
      
      .hero-stats {
        gap: var(--spacing-6);
      }
      
      .newsletter-form-home {
        flex-direction: column;
      }
      
      .grid-3 {
        grid-template-columns: 1fr;
      }
      
      .grid-2 {
        grid-template-columns: 1fr;
      }
    }
  </style>
</BaseLayout>

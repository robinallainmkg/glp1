---
import BaseLayout from '../../layouts/BaseLayout.astro';
---

<BaseLayout 
  title="Guide Beaut√© et Perte de Poids avec GLP-1 ‚Äì T√©l√©chargement Gratuit"
  description="T√©l√©chargez gratuitement notre guide complet : conseils beaut√©, routine skincare et nutrition optimis√©e pour les utilisateurs de traitements GLP-1 en France."
  keywords="GLP-1, beaut√©, skincare, perte de poids, guide gratuit, t√©l√©chargement, cosm√©tiques, Wegovy, Ozempic"
>
  <div class="container">
    <!-- Hero Section -->
    <section class="landing-hero">
      <div class="hero-content">
        <div class="hero-badge">
          ‚ú® Guide Gratuit ‚ú®
        </div>
        <h1 class="landing-title">
          Guide Beaut√© & Perte de Poids avec <span class="text-gradient">GLP-1</span>
        </h1>
        <p class="landing-subtitle">
          D√©couvrez les secrets pour maintenir une peau √©clatante et une apparence radieuse 
          tout au long de votre parcours de perte de poids avec les traitements GLP-1.
        </p>
        
        <div class="value-points">
          <div class="value-point">
            <span class="value-icon">üíÑ</span>
            <span>Routine beaut√© adapt√©e aux GLP-1</span>
          </div>
          <div class="value-point">
            <span class="value-icon">üß¥</span>
            <span>Produits cosm√©tiques recommand√©s</span>
          </div>
          <div class="value-point">
            <span class="value-icon">ü•ó</span>
            <span>Nutrition pour une peau √©clatante</span>
          </div>
          <div class="value-point">
            <span class="value-icon">üìä</span>
            <span>Suivi et conseils personnalis√©s</span>
          </div>
        </div>
      </div>
      
      <div class="form-container">
        <form class="landing-form" id="beautyGuideForm" novalidate>
          <!-- Formulaire s√©curis√© avec API -->
          
          <h3 class="form-title">T√©l√©chargez Votre Guide Gratuit</h3>
          <p class="form-subtitle">
            Recevez imm√©diatement le guide + nos conseils exclusifs par email
          </p>
          
          <div class="form-group">
            <label for="firstName">Pr√©nom *</label>
            <input type="text" id="firstName" name="name" required autocomplete="given-name">
          </div>
          
          <div class="form-group">
            <label for="email">Email *</label>
            <input type="email" id="email" name="email" required autocomplete="email">
          </div>
          
          <div class="form-group">
            <label for="treatment">Quel traitement vous int√©resse ?</label>
            <select id="treatment" name="treatment">
              <option value="">S√©lectionner...</option>
              <option value="wegovy">Wegovy</option>
              <option value="ozempic">Ozempic</option>
              <option value="saxenda">Saxenda</option>
              <option value="trulicity">Trulicity</option>
              <option value="autre">Autre</option>
              <option value="pas-encore-decide">Pas encore d√©cid√©</option>
            </select>
          </div>
          
          <div class="form-group">
            <label for="concerns">Vos principales pr√©occupations :</label>
            <div class="checkbox-group">
              <label class="checkbox-label">
                <input type="checkbox" name="concerns" value="peau-seche">
                <span class="checkmark"></span>
                Peau s√®che
              </label>
              <label class="checkbox-label">
                <input type="checkbox" name="concerns" value="perte-cheveux">
                <span class="checkmark"></span>
                Perte de cheveux
              </label>
              <label class="checkbox-label">
                <input type="checkbox" name="concerns" value="fatigue-teint">
                <span class="checkmark"></span>
                Fatigue du teint
              </label>
              <label class="checkbox-label">
                <input type="checkbox" name="concerns" value="elasticite-peau">
                <span class="checkmark"></span>
                √âlasticit√© de la peau
              </label>
            </div>
          </div>
          
          <div class="form-group consent">
            <label class="checkbox-label">
              <input type="checkbox" name="newsletter_consent" required>
              <span class="checkmark"></span>
              J'accepte de recevoir des conseils et des recommandations produits par email
            </label>
          </div>
          
          <button type="submit" class="btn btn-primary btn-lg btn-full">
            üì• T√©l√©charger le Guide Gratuit
          </button>
          
          <div class="form-success hidden" id="beauty-form-success">
            <p class="success-message">‚úÖ Guide envoy√© ! V√©rifiez votre bo√Æte email (et vos spams).</p>
          </div>
          
          <div class="form-error hidden" id="beauty-form-error">
            <p class="error-message">‚ùå Erreur d'envoi. Veuillez r√©essayer ou nous contacter.</p>
          </div>
          
          <p class="form-disclaimer">
            üîí Vos donn√©es sont prot√©g√©es. D√©sinscription possible √† tout moment.
          </p>
        </form>
      </div>
    </section>

    <!-- Preview Section -->
    <section class="preview-section">
      <div class="section-header">
        <h2 class="section-title">Aper√ßu de Votre Guide Gratuit</h2>
        <p class="section-description">
          Plus de 25 pages de conseils exclusifs adapt√©s aux utilisateurs de GLP-1 en France
        </p>
      </div>
      
      <div class="preview-grid">
        <div class="preview-item">
          <div class="preview-icon">üß¥</div>
          <h4>Skincare Routine Optimis√©e</h4>
          <p>Une routine de soins en 6 √©tapes sp√©cialement con√ßue pour contrer les effets des traitements GLP-1 sur la peau</p>
        </div>
        
        <div class="preview-item">
          <div class="preview-icon">üíä</div>
          <h4>Compl√©ments Recommand√©s</h4>
          <p>Les vitamines et min√©raux essentiels pour maintenir l'√©clat de votre peau pendant la perte de poids</p>
        </div>
        
        <div class="preview-item">
          <div class="preview-icon">üçé</div>
          <h4>Nutrition Beaut√©</h4>
          <p>Plan alimentaire pour nourrir votre peau de l'int√©rieur tout en maximisant l'efficacit√© des GLP-1</p>
        </div>
        
        <div class="preview-item">
          <div class="preview-icon">üíÑ</div>
          <h4>Maquillage Adapt√©</h4>
          <p>Techniques et produits pour un teint parfait m√™me lors des fluctuations de poids</p>
        </div>
        
        <div class="preview-item">
          <div class="preview-icon">üì±</div>
          <h4>Application Mobile</h4>
          <p>Suivi quotidien de votre routine beaut√© avec rappels et conseils personnalis√©s</p>
        </div>
        
        <div class="preview-item">
          <div class="preview-icon">üë•</div>
          <h4>Communaut√© Priv√©e</h4>
          <p>Acc√®s √† notre groupe Facebook priv√© avec d'autres utilisatrices de GLP-1</p>
        </div>
      </div>
    </section>

    <!-- Testimonials -->
    <section class="testimonials-section">
      <div class="section-header">
        <h2 class="section-title">Ce Que Disent Nos Lectrices</h2>
      </div>
      
      <div class="testimonials-grid">
        <div class="testimonial">
          <div class="testimonial-content">
            "Gr√¢ce aux conseils de ce guide, j'ai maintenu une peau √©clatante tout au long de ma perte de 15kg avec Wegovy. Les recommandations de produits sont parfaites !"
          </div>
          <div class="testimonial-author">
            <strong>Marie L.</strong> - Paris
          </div>
        </div>
        
        <div class="testimonial">
          <div class="testimonial-content">
            "Enfin un guide qui comprend les sp√©cificit√©s des traitements GLP-1 ! Les conseils nutrition beaut√© ont vraiment fait la diff√©rence."
          </div>
          <div class="testimonial-author">
            <strong>Sophie D.</strong> - Lyon
          </div>
        </div>
        
        <div class="testimonial">
          <div class="testimonial-content">
            "J'ai √©vit√© la plupart des probl√®mes de peau que mes amies ont eus avec Ozempic. Ce guide est une mine d'or !"
          </div>
          <div class="testimonial-author">
            <strong>C√©line M.</strong> - Bordeaux
          </div>
        </div>
      </div>
    </section>

    <!-- Affiliate Recommendations -->
    <section class="affiliate-section">
      <div class="section-header">
        <h2 class="section-title">Nos Produits Recommand√©s</h2>
        <p class="section-description">
          S√©lection exclusive de produits test√©s et approuv√©s par notre communaut√©
        </p>
      </div>
      
      <div class="products-grid">
        <div class="product-card">
          <div class="product-image">üß¥</div>
          <h4 class="product-title">S√©rum Hydratation Intense</h4>
          <p class="product-description">
            S√©rum √† l'acide hyaluronique sp√©cialement formul√© pour les peaux s√®ches dues aux traitements GLP-1.
          </p>
          <div class="product-price">49,90 ‚Ç¨</div>
          <a href="#" class="btn btn-secondary">Commander</a>
        </div>
        
        <div class="product-card">
          <div class="product-image">üíä</div>
          <h4 class="product-title">Compl√©ment Cheveux & Ongles</h4>
          <p class="product-description">
            Complex vitamines B, biotine et zinc pour renforcer cheveux et ongles fragilis√©s.
          </p>
          <div class="product-price">29,90 ‚Ç¨</div>
          <a href="#" class="btn btn-secondary">Commander</a>
        </div>
        
        <div class="product-card">
          <div class="product-image">üåü</div>
          <h4 class="product-title">Cr√®me Anti-√Çge R√©g√©n√©rante</h4>
          <p class="product-description">
            Formule enrichie en collag√®ne et peptides pour maintenir l'√©lasticit√© de la peau.
          </p>
          <div class="product-price">69,90 ‚Ç¨</div>
          <a href="#" class="btn btn-secondary">Commander</a>
        </div>
      </div>
    </section>

    <!-- FAQ -->
    <section class="faq-section">
      <div class="section-header">
        <h2 class="section-title">Questions Fr√©quentes</h2>
      </div>
      
      <div class="faq-container">
        <div class="faq-item">
          <button class="faq-question">
            Le guide est-il vraiment gratuit ?
            <span class="faq-icon">‚ñº</span>
          </button>
          <div class="faq-answer">
            Oui, le guide est enti√®rement gratuit. Vous recevrez √©galement nos conseils hebdomadaires par email, mais vous pouvez vous d√©sinscrire √† tout moment.
          </div>
        </div>
        
        <div class="faq-item">
          <button class="faq-question">
            Les conseils sont-ils adapt√©s √† tous les traitements GLP-1 ?
            <span class="faq-icon">‚ñº</span>
          </button>
          <div class="faq-answer">
            Oui, nos conseils beaut√© s'appliquent √† tous les traitements GLP-1 (Wegovy, Ozempic, Saxenda, Trulicity, etc.) car ils agissent de mani√®re similaire sur l'organisme.
          </div>
        </div>
        
        <div class="faq-item">
          <button class="faq-question">
            Puis-je appliquer ces conseils si je d√©bute mon traitement ?
            <span class="faq-icon">‚ñº</span>
          </button>
          <div class="faq-answer">
            Absolument ! Il est m√™me recommand√© de commencer la routine beaut√© d√®s le d√©but du traitement pour pr√©venir les probl√®mes potentiels.
          </div>
        </div>
        
        <div class="faq-item">
          <button class="faq-question">
            Les produits recommand√©s sont-ils disponibles en France ?
            <span class="faq-icon">‚ñº</span>
          </button>
          <div class="faq-answer">
            Oui, tous les produits recommand√©s sont disponibles en France, soit en pharmacie, soit en ligne avec livraison rapide.
          </div>
        </div>
      </div>
    </section>
  </div>

  <style>
    /* Landing Hero */
    .landing-hero {
      display: grid;
      grid-template-columns: 1fr 400px;
      gap: var(--spacing-12);
      align-items: start;
      padding: var(--spacing-12) 0;
      margin-bottom: var(--spacing-16);
    }

    .hero-badge {
      display: inline-block;
      background: linear-gradient(135deg, var(--accent-green), var(--accent-green-light));
      color: white;
      padding: var(--spacing-2) var(--spacing-4);
      border-radius: var(--radius-full);
      font-weight: 600;
      font-size: var(--font-size-sm);
      margin-bottom: var(--spacing-6);
    }

    .landing-title {
      font-size: var(--font-size-5xl);
      font-weight: 800;
      line-height: 1.1;
      margin-bottom: var(--spacing-6);
    }

    .landing-subtitle {
      font-size: var(--font-size-xl);
      color: var(--gray-600);
      line-height: 1.6;
      margin-bottom: var(--spacing-8);
    }

    .value-points {
      display: grid;
      grid-template-columns: 1fr 1fr;
      gap: var(--spacing-4);
    }

    .value-point {
      display: flex;
      align-items: center;
      gap: var(--spacing-3);
      font-weight: 500;
      color: var(--gray-700);
    }

    .value-icon {
      font-size: var(--font-size-xl);
    }

    /* Form */
    .form-container {
      background: white;
      border-radius: var(--radius-2xl);
      padding: var(--spacing-8);
      box-shadow: var(--shadow-xl);
      border: 2px solid var(--gray-200);
      position: sticky;
      top: var(--spacing-20);
    }

    .form-title {
      font-size: var(--font-size-2xl);
      font-weight: 700;
      color: var(--gray-900);
      margin-bottom: var(--spacing-2);
      text-align: center;
    }

    .form-subtitle {
      color: var(--gray-600);
      text-align: center;
      margin-bottom: var(--spacing-6);
      font-size: var(--font-size-sm);
    }

    .form-group {
      margin-bottom: var(--spacing-5);
    }

    .form-group label {
      display: block;
      font-weight: 600;
      color: var(--gray-700);
      margin-bottom: var(--spacing-2);
      font-size: var(--font-size-sm);
    }

    .form-group input,
    .form-group select {
      width: 100%;
      padding: var(--spacing-3);
      border: 2px solid var(--gray-200);
      border-radius: var(--radius-lg);
      font-size: var(--font-size-base);
      transition: var(--transition);
    }

    .form-group input:focus,
    .form-group select:focus {
      outline: none;
      border-color: var(--primary-blue);
      box-shadow: 0 0 0 3px rgba(37, 99, 235, 0.1);
    }

    .checkbox-group {
      display: grid;
      gap: var(--spacing-2);
    }

    .checkbox-label {
      display: flex;
      align-items: center;
      gap: var(--spacing-2);
      cursor: pointer;
      font-weight: 400;
      font-size: var(--font-size-sm);
    }

    .checkbox-label input[type="checkbox"] {
      width: auto;
      margin: 0;
    }

    .consent {
      background: var(--gray-50);
      padding: var(--spacing-4);
      border-radius: var(--radius-lg);
      border: 1px solid var(--gray-200);
    }

    .btn-full {
      width: 100%;
      justify-content: center;
    }

    .form-disclaimer {
      text-align: center;
      font-size: var(--font-size-xs);
      color: var(--gray-500);
      margin-top: var(--spacing-3);
    }

    /* Messages de succ√®s/erreur */
    .form-success,
    .form-error {
      margin-top: var(--spacing-4);
      padding: var(--spacing-4);
      border-radius: var(--radius-lg);
      text-align: center;
    }

    .form-success {
      background: #f0fdf4;
      border: 1px solid #16a34a;
    }

    .success-message {
      color: #000000;
      font-weight: 600;
      margin: 0;
    }

    .form-error {
      background: #fef2f2;
      border: 1px solid #dc2626;
    }

    .error-message {
      color: #dc2626;
      font-weight: 600;
      margin: 0;
    }

    .hidden {
      display: none;
    }

    /* Preview Section */
    .preview-section {
      margin-bottom: var(--spacing-16);
    }

    .preview-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: var(--spacing-6);
    }

    .preview-item {
      background: white;
      padding: var(--spacing-6);
      border-radius: var(--radius-xl);
      border: 1px solid var(--gray-200);
      text-align: center;
      transition: var(--transition);
    }

    .preview-item:hover {
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
    }

    .preview-icon {
      font-size: var(--font-size-4xl);
      margin-bottom: var(--spacing-4);
    }

    .preview-item h4 {
      font-size: var(--font-size-lg);
      font-weight: 600;
      margin-bottom: var(--spacing-3);
      color: var(--gray-900);
    }

    .preview-item p {
      color: var(--gray-600);
      line-height: 1.6;
    }

    /* Testimonials */
    .testimonials-section {
      background: var(--gray-50);
      padding: var(--spacing-12);
      border-radius: var(--radius-2xl);
      margin-bottom: var(--spacing-16);
    }

    .testimonials-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: var(--spacing-6);
    }

    .testimonial {
      background: white;
      padding: var(--spacing-6);
      border-radius: var(--radius-xl);
      box-shadow: var(--shadow-sm);
    }

    .testimonial-content {
      font-style: italic;
      color: var(--gray-700);
      line-height: 1.6;
      margin-bottom: var(--spacing-4);
    }

    .testimonial-author {
      color: var(--gray-600);
      font-size: var(--font-size-sm);
    }

    /* Products */
    .affiliate-section {
      margin-bottom: var(--spacing-16);
    }

    .products-grid {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
      gap: var(--spacing-6);
    }

    .product-card {
      background: white;
      border-radius: var(--radius-xl);
      padding: var(--spacing-6);
      border: 2px solid var(--gray-200);
      text-align: center;
      transition: var(--transition);
    }

    .product-card:hover {
      border-color: var(--accent-green);
      transform: translateY(-4px);
      box-shadow: var(--shadow-lg);
    }

    .product-image {
      font-size: var(--font-size-4xl);
      margin-bottom: var(--spacing-4);
    }

    .product-title {
      font-size: var(--font-size-lg);
      font-weight: 600;
      margin-bottom: var(--spacing-3);
      color: var(--gray-900);
    }

    .product-description {
      color: var(--gray-600);
      line-height: 1.5;
      margin-bottom: var(--spacing-4);
      font-size: var(--font-size-sm);
    }

    .product-price {
      font-size: var(--font-size-xl);
      font-weight: 700;
      color: var(--accent-green);
      margin-bottom: var(--spacing-4);
    }

    /* FAQ */
    .faq-section {
      margin-bottom: var(--spacing-16);
    }

    .faq-container {
      max-width: 800px;
      margin: 0 auto;
    }

    /* Responsive */
    @media (max-width: 1024px) {
      .landing-hero {
        grid-template-columns: 1fr;
        gap: var(--spacing-8);
      }

      .form-container {
        position: static;
        margin-top: var(--spacing-8);
      }

      .value-points {
        grid-template-columns: 1fr;
        gap: var(--spacing-3);
      }
    }

    @media (max-width: 768px) {
      .landing-title {
        font-size: var(--font-size-3xl);
      }

      .landing-subtitle {
        font-size: var(--font-size-lg);
      }

      .preview-grid,
      .products-grid,
      .testimonials-grid {
        grid-template-columns: 1fr;
      }
    }
  </style>

  <script>
    // Beauty Guide Form handling with API
    document.getElementById('beautyGuideForm')?.addEventListener('submit', async function(e) {
      e.preventDefault();
      
      const successDiv = document.getElementById('beauty-form-success');
      const errorDiv = document.getElementById('beauty-form-error');
      
      // Masquer les messages pr√©c√©dents
      successDiv.classList.add('hidden');
      errorDiv.classList.add('hidden');
      
      const button = this.querySelector('button[type="submit"]');
      const originalText = button.innerHTML;
      
      button.innerHTML = '‚è≥ Envoi en cours...';
      button.disabled = true;
      
      try {
        const formData = new FormData(this);
        
        // Ajouter des informations sp√©cifiques au guide beaut√©
        formData.append('subject', 'Guide Beaut√© et Perte de Poids GLP-1');
        
        // Construire le message avec les informations du formulaire
        const treatment = formData.get('treatment') || 'Non sp√©cifi√©';
        const concerns = formData.getAll('concerns').join(', ') || 'Aucune sp√©cifi√©e';
        const messageContent = `Demande de t√©l√©chargement du guide beaut√© avec les informations suivantes:
- Traitement d'int√©r√™t: ${treatment}
- Pr√©occupations: ${concerns}

L'utilisateur souhaite recevoir le guide complet par email.`;
        
        formData.append('message', messageContent);
        
        // G√©rer le consentement newsletter et privacy
        const newsletterConsent = formData.get('newsletter_consent');
        if (newsletterConsent) {
            formData.append('newsletter', '1');
            formData.append('privacy', '1'); // Consentement implicite pour le guide
        } else {
            formData.append('privacy', '1'); // Consentement minimal requis
        }
        
        const response = await fetch('/api/contact.php', {
          method: 'POST',
          body: formData
        });
        
        const result = await response.json();
        
        if (response.ok && result.success) {
          // Succ√®s
          successDiv.classList.remove('hidden');
          
          // Personnaliser le message de succ√®s
          const successMessage = successDiv.querySelector('.success-message');
          const name = formData.get('name');
          const email = formData.get('email');
          
          if (name) {
            successMessage.innerHTML = `‚úÖ Merci ${name} ! Guide envoy√© √† ${email}. V√©rifiez votre bo√Æte email (et vos spams).`;
          }
          
          // Masquer le formulaire apr√®s succ√®s
          this.style.opacity = '0.5';
          
          // Analytics enrichi
          if (typeof gtag !== 'undefined') {
            const treatment = formData.get('treatment') || 'unspecified';
            const concerns = formData.getAll('concerns');
            const newsletterConsent = formData.get('newsletter_consent') ? 'yes' : 'no';
            
            // √âv√©nement principal de t√©l√©chargement
            gtag('event', 'guide_download', {
              'event_category': 'engagement',
              'event_label': 'beauty-guide',
              'custom_parameters': {
                'treatment_interest': treatment,
                'concerns_count': concerns.length,
                'main_concerns': concerns.slice(0, 3).join('|'),
                'newsletter_consent': newsletterConsent
              }
            });
            
            // √âv√©nement de conversion pour le lead qualifi√©
            gtag('event', 'generate_lead', {
              'event_category': 'conversion',
              'currency': 'EUR',
              'value': 15.0, // Valeur plus √©lev√©e car plus qualifi√©
              'lead_type': 'guide_download'
            });
            
            // √âv√©nement newsletter si consentement
            if (newsletterConsent === 'yes') {
              gtag('event', 'newsletter_signup', {
                'event_category': 'conversion',
                'event_label': 'guide_form',
                'method': 'guide_download'
              });
            }
            
            // Tracking des int√©r√™ts par traitement
            if (treatment !== 'unspecified') {
              gtag('event', 'treatment_interest', {
                'event_category': 'user_preferences',
                'event_label': treatment,
                'treatment_type': treatment
              });
            }
            
            // Tracking des pr√©occupations
            concerns.forEach(concern => {
              gtag('event', 'concern_selected', {
                'event_category': 'user_preferences',
                'event_label': concern,
                'concern_type': concern
              });
            });
          }
        } else {
          throw new Error(result.error || 'Erreur lors de l\'envoi');
        }
      } catch (error) {
        console.error('Erreur:', error);
        const errorMessage = errorDiv.querySelector('.error-message');
        if (errorMessage) {
          errorMessage.textContent = error.message.includes('obligatoire') ? 
            '‚ö†Ô∏è Veuillez remplir tous les champs obligatoires' : 
            '‚ùå Erreur d\'envoi. Veuillez r√©essayer.';
        }
        errorDiv.classList.remove('hidden');
      } finally {
        // R√©activer le bouton apr√®s un d√©lai
        setTimeout(() => {
          button.innerHTML = originalText;
          button.disabled = false;
        }, 3000);
      }
    });

    // FAQ toggle
    document.querySelectorAll('.faq-question').forEach(button => {
      button.addEventListener('click', () => {
        const faqItem = button.parentElement;
        const isActive = faqItem.classList.contains('active');
        
        // Close all other FAQ items
        document.querySelectorAll('.faq-item').forEach(item => {
          item.classList.remove('active');
        });
        
        // Toggle current item
        if (!isActive) {
          faqItem.classList.add('active');
        }
      });
    });
  </script>
</BaseLayout>



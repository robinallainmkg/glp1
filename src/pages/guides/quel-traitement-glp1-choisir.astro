---
import BaseLayout from '../../layouts/BaseLayout.astro';
import AffiliateProduct from '../../components/AffiliateProduct.astro';
---

<BaseLayout 
  title="Diagnostic GLP-1 Personnalis√© : Ozempic ou Wegovy ? | Test Gratuit"
  description="Diagnostic personnalis√© en 5 minutes pour savoir si Ozempic ou Wegovy est fait pour vous. Test gratuit bas√© sur votre profil m√©dical."
  keywords="diagnostic GLP-1, test Ozempic, Wegovy, quel traitement choisir, √©ligibilit√© GLP-1"
>
  <div class="container">
    <div class="diagnostic-page">
      
      <!-- Header -->
      <header class="diagnostic-header">
        <h1>üéØ Diagnostic Personnalis√© GLP-1</h1>
        <p class="subtitle">D√©couvrez en 5 minutes quel traitement est le plus adapt√© √† votre situation</p>
        <div class="progress-bar">
          <div class="progress-fill" id="progress-fill"></div>
        </div>
        <p class="progress-text"><span id="question-number">1</span> sur 9 questions</p>
      </header>

      <!-- Quiz Container -->
      <div class="quiz-container" id="quiz-container">
        
        <!-- Question 1: Objectif principal -->
        <div class="question active" data-question="1">
          <h2>Quel est votre objectif principal ?</h2>
          <div class="options">
            <label class="option">
              <input type="radio" name="q1" value="effets-secondaires">
              <span class="option-content">
                <div class="option-icon">üòµ</div>
                <div class="option-text">
                  <strong>R√©duire les effets secondaires</strong>
                  <p>Je suis d√©j√† sous GLP-1 et j'ai des effets ind√©sirables</p>
                </div>
              </span>
            </label>
            <label class="option">
              <input type="radio" name="q1" value="perte-poids">
              <span class="option-content">
                <div class="option-icon">üìâ</div>
                <div class="option-text">
                  <strong>Perdre du poids</strong>
                  <p>Je veux principalement maigrir</p>
                </div>
              </span>
            </label>
            <label class="option">
              <input type="radio" name="q1" value="diabete">
              <span class="option-content">
                <div class="option-icon">ü©∫</div>
                <div class="option-text">
                  <strong>Traiter mon diab√®te</strong>
                  <p>J'ai un diab√®te de type 2</p>
                </div>
              </span>
            </label>
            <label class="option">
              <input type="radio" name="q1" value="les-deux">
              <span class="option-content">
                <div class="option-icon">üéØ</div>
                <div class="option-text">
                  <strong>Les deux</strong>
                  <p>Diab√®te + perte de poids</p>
                </div>
              </span>
            </label>
          </div>
        </div>

        <!-- Question 2: IMC -->
        <div class="question" data-question="2">
          <h2>Quelle est votre situation pond√©rale ?</h2>
          <div class="options">
            <label class="option">
              <input type="radio" name="q2" value="surpoids">
              <span class="option-content">
                <div class="option-icon">üìä</div>
                <div class="option-text">
                  <strong>Surpoids (IMC 25-30)</strong>
                  <p>Quelques kilos en trop</p>
                </div>
              </span>
            </label>
            <label class="option">
              <input type="radio" name="q2" value="obesite-1">
              <span class="option-content">
                <div class="option-icon">üìà</div>
                <div class="option-text">
                  <strong>Ob√©sit√© mod√©r√©e (IMC 30-35)</strong>
                  <p>Surpoids important</p>
                </div>
              </span>
            </label>
            <label class="option">
              <input type="radio" name="q2" value="obesite-2">
              <span class="option-content">
                <div class="option-icon">üö®</div>
                <div class="option-text">
                  <strong>Ob√©sit√© s√©v√®re (IMC >35)</strong>
                  <p>Ob√©sit√© avec complications</p>
                </div>
              </span>
            </label>
          </div>
        </div>

        <!-- Question 3: Exp√©rience r√©gimes -->
        <div class="question" data-question="3">
          <h2>Avez-vous d√©j√† essay√© de perdre du poids ?</h2>
          <div class="options">
            <label class="option">
              <input type="radio" name="q3" value="jamais">
              <span class="option-content">
                <div class="option-icon">üÜï</div>
                <div class="option-text">
                  <strong>Jamais vraiment</strong>
                  <p>C'est ma premi√®re d√©marche s√©rieuse</p>
                </div>
              </span>
            </label>
            <label class="option">
              <input type="radio" name="q3" value="quelques-fois">
              <span class="option-content">
                <div class="option-icon">üîÑ</div>
                <div class="option-text">
                  <strong>Quelques tentatives</strong>
                  <p>R√©gimes avec reprises de poids</p>
                </div>
              </span>
            </label>
            <label class="option">
              <input type="radio" name="q3" value="nombreuses">
              <span class="option-content">
                <div class="option-icon">üé¢</div>
                <div class="option-text">
                  <strong>Nombreux √©checs</strong>
                  <p>Effet yoyo r√©p√©t√©</p>
                </div>
              </span>
            </label>
            <label class="option">
              <input type="radio" name="q3" value="glp1-deja">
              <span class="option-content">
                <div class="option-icon">üíä</div>
                <div class="option-text">
                  <strong>J'ai d√©j√† fait un traitement GLP-1</strong>
                  <p>Ozempic, Wegovy ou autre, mais j'ai arr√™t√©</p>
                </div>
              </span>
            </label>
          </div>
        </div>

        <!-- Question 4: Budget -->
        <div class="question" data-question="4">
          <h2>Quel budget mensuel envisagez-vous ?</h2>
          <div class="options">
            <label class="option">
              <input type="radio" name="q4" value="budget-limite">
              <span class="option-content">
                <div class="option-icon">üí∞</div>
                <div class="option-text">
                  <strong>Budget limit√©</strong>
                  <p>Moins de 150‚Ç¨/mois</p>
                </div>
              </span>
            </label>
            <label class="option">
              <input type="radio" name="q4" value="budget-moyen">
              <span class="option-content">
                <div class="option-icon">üí≥</div>
                <div class="option-text">
                  <strong>Budget mod√©r√©</strong>
                  <p>150-300‚Ç¨/mois</p>
                </div>
              </span>
            </label>
            <label class="option">
              <input type="radio" name="q4" value="budget-eleve">
              <span class="option-content">
                <div class="option-icon">üíé</div>
                <div class="option-text">
                  <strong>Budget confortable</strong>
                  <p>Plus de 300‚Ç¨/mois</p>
                </div>
              </span>
            </label>
          </div>
        </div>

        <!-- Question 5: Urgence -->
        <div class="question" data-question="5">
          <h2>Dans quel d√©lai souhaitez-vous voir des r√©sultats ?</h2>
          <div class="options">
            <label class="option">
              <input type="radio" name="q5" value="rapide">
              <span class="option-content">
                <div class="option-icon">‚ö°</div>
                <div class="option-text">
                  <strong>Rapidement</strong>
                  <p>Dans les 3 premiers mois</p>
                </div>
              </span>
            </label>
            <label class="option">
              <input type="radio" name="q5" value="progressif">
              <span class="option-content">
                <div class="option-icon">üìÖ</div>
                <div class="option-text">
                  <strong>Progressivement</strong>
                  <p>Sur 6-12 mois</p>
                </div>
              </span>
            </label>
            <label class="option">
              <input type="radio" name="q5" value="patient">
              <span class="option-content">
                <div class="option-icon">üêå</div>
                <div class="option-text">
                  <strong>Patiemment</strong>
                  <p>Pas press√©, sur le long terme</p>
                </div>
              </span>
            </label>
          </div>
        </div>

        <!-- Question 6: Effets secondaires -->
        <div class="question" data-question="6">
          <h2>Quelle est votre tol√©rance aux effets secondaires ?</h2>
          <div class="options">
            <label class="option">
              <input type="radio" name="q6" value="sensible">
              <span class="option-content">
                <div class="option-icon">üòñ</div>
                <div class="option-text">
                  <strong>Tr√®s sensible</strong>
                  <p>Je supporte mal les naus√©es</p>
                </div>
              </span>
            </label>
            <label class="option">
              <input type="radio" name="q6" value="normale">
              <span class="option-content">
                <div class="option-icon">üòê</div>
                <div class="option-text">
                  <strong>Tol√©rance normale</strong>
                  <p>Effets temporaires acceptables</p>
                </div>
              </span>
            </label>
            <label class="option">
              <input type="radio" name="q6" value="bonne">
              <span class="option-content">
                <div class="option-icon">üí™</div>
                <div class="option-text">
                  <strong>Bonne tol√©rance</strong>
                  <p>J'encaisse bien les traitements</p>
                </div>
              </span>
            </label>
          </div>
        </div>

        <!-- Question 7: Suivi m√©dical -->
        <div class="question" data-question="7">
          <h2>Avez-vous un suivi m√©dical r√©gulier ?</h2>
          <div class="options">
            <label class="option">
              <input type="radio" name="q7" value="aucun">
              <span class="option-content">
                <div class="option-icon">üö´</div>
                <div class="option-text">
                  <strong>Aucun suivi</strong>
                  <p>Je ne vois jamais de m√©decin</p>
                </div>
              </span>
            </label>
            <label class="option">
              <input type="radio" name="q7" value="occasionnel">
              <span class="option-content">
                <div class="option-icon">üë®‚Äç‚öïÔ∏è</div>
                <div class="option-text">
                  <strong>Suivi occasionnel</strong>
                  <p>M√©decin traitant de temps en temps</p>
                </div>
              </span>
            </label>
            <label class="option">
              <input type="radio" name="q7" value="regulier">
              <span class="option-content">
                <div class="option-icon">üè•</div>
                <div class="option-text">
                  <strong>Suivi r√©gulier</strong>
                  <p>M√©decin traitant + sp√©cialistes</p>
                </div>
              </span>
            </label>
          </div>
        </div>

        <!-- Question 8: Probl√®mes de sant√© -->
        <div class="question" data-question="8">
          <h2>Avez-vous des probl√®mes de sant√© particuliers ?</h2>
          <div class="options">
            <label class="option">
              <input type="radio" name="q8" value="aucun">
              <span class="option-content">
                <div class="option-icon">‚úÖ</div>
                <div class="option-text">
                  <strong>Aucun probl√®me</strong>
                  <p>Bonne sant√© g√©n√©rale</p>
                </div>
              </span>
            </label>
            <label class="option">
              <input type="radio" name="q8" value="mineurs">
              <span class="option-content">
                <div class="option-icon">‚ö†Ô∏è</div>
                <div class="option-text">
                  <strong>Probl√®mes mineurs</strong>
                  <p>Hypertension, cholest√©rol...</p>
                </div>
              </span>
            </label>
            <label class="option">
              <input type="radio" name="q8" value="importants">
              <span class="option-content">
                <div class="option-icon">üö®</div>
                <div class="option-text">
                  <strong>Probl√®mes importants</strong>
                  <p>Maladies chroniques multiples</p>
                </div>
              </span>
            </label>
          </div>
        </div>

        <!-- Question 9: Effets secondaires (conditionnelle) -->
        <div class="question" data-question="9" id="effets-secondaires-question" style="display: none;">
          <h2>Quels effets secondaires ressentez-vous actuellement ?</h2>
          <p style="font-size: 0.9rem; color: #666; margin-bottom: 1.5rem;">Cochez tous les effets que vous ressentez (plusieurs choix possibles)</p>
          <div class="options effects-checklist">
            <label class="option checkbox-option">
              <input type="checkbox" name="effets" value="nausees">
              <span class="option-content">
                <div class="option-icon">ü§¢</div>
                <div class="option-text">
                  <strong>Naus√©es</strong>
                  <p>Sensation de mal de c≈ìur, envies de vomir</p>
                </div>
              </span>
            </label>
            <label class="option checkbox-option">
              <input type="checkbox" name="effets" value="vomissements">
              <span class="option-content">
                <div class="option-icon">ü§Æ</div>
                <div class="option-text">
                  <strong>Vomissements</strong>
                  <p>√âpisodes de vomissements r√©p√©t√©s</p>
                </div>
              </span>
            </label>
            <label class="option checkbox-option">
              <input type="checkbox" name="effets" value="diarrhee">
              <span class="option-content">
                <div class="option-icon">üí©</div>
                <div class="option-text">
                  <strong>Diarrh√©e</strong>
                  <p>Selles liquides fr√©quentes</p>
                </div>
              </span>
            </label>
            <label class="option checkbox-option">
              <input type="checkbox" name="effets" value="constipation">
              <span class="option-content">
                <div class="option-icon">üöΩ</div>
                <div class="option-text">
                  <strong>Constipation</strong>
                  <p>Difficult√©s √† aller √† la selle</p>
                </div>
              </span>
            </label>
            <label class="option checkbox-option">
              <input type="checkbox" name="effets" value="brulures-estomac">
              <span class="option-content">
                <div class="option-icon">üî•</div>
                <div class="option-text">
                  <strong>Br√ªlures d'estomac</strong>
                  <p>Reflux gastrique, acidit√©</p>
                </div>
              </span>
            </label>
            <label class="option checkbox-option">
              <input type="checkbox" name="effets" value="fatigue">
              <span class="option-content">
                <div class="option-icon">üò¥</div>
                <div class="option-text">
                  <strong>Fatigue excessive</strong>
                  <p>Manque d'√©nergie, √©puisement</p>
                </div>
              </span>
            </label>
            <label class="option checkbox-option">
              <input type="checkbox" name="effets" value="chute-cheveux">
              <span class="option-content">
                <div class="option-icon">üíá</div>
                <div class="option-text">
                  <strong>Chute de cheveux</strong>
                  <p>Perte de cheveux importante</p>
                </div>
              </span>
            </label>
            <label class="option checkbox-option">
              <input type="checkbox" name="effets" value="peau-relachee">
              <span class="option-content">
                <div class="option-icon">üë¥</div>
                <div class="option-text">
                  <strong>Peau rel√¢ch√©e</strong>
                  <p>Visage creus√©, peau frip√©e</p>
                </div>
              </span>
            </label>
            <label class="option checkbox-option">
              <input type="checkbox" name="effets" value="vertige">
              <span class="option-content">
                <div class="option-icon">üòµ‚Äçüí´</div>
                <div class="option-text">
                  <strong>Vertiges</strong>
                  <p>Sensations d'√©tourdissement</p>
                </div>
              </span>
            </label>
            <label class="option checkbox-option">
              <input type="checkbox" name="effets" value="carences">
              <span class="option-content">
                <div class="option-icon">üíä</div>
                <div class="option-text">
                  <strong>Carences nutritionnelles</strong>
                  <p>Manque de vitamines, min√©raux</p>
                </div>
              </span>
            </label>
          </div>
        </div>

      </div>

      <!-- Navigation Buttons -->
      <div class="navigation">
        <button id="prev-btn" class="btn btn-secondary" style="display: none;">‚Üê Pr√©c√©dent</button>
        <button id="next-btn" class="btn btn-primary">Suivant ‚Üí</button>
        <button id="results-btn" class="btn btn-primary" style="display: none;">Voir mes R√©sultats üéØ</button>
      </div>

      <!-- Results Section -->
      <div class="results-section" id="results-section" style="display: none;">
        <div class="results-header">
          <h2>üéØ Votre Recommandation Personnalis√©e</h2>
          <p>Bas√©e sur vos r√©ponses au diagnostic</p>
        </div>
        <div class="main-results" id="results-content">
          <!-- Results will be inserted here -->
        </div>
      </div>

    </div>
  </div>

  <style>
    .diagnostic-page {
      max-width: 800px;
      margin: 0 auto;
      padding: 2rem 1rem;
    }

    .diagnostic-header {
      text-align: center;
      margin-bottom: 3rem;
    }

    .diagnostic-header h1 {
      font-size: 2.5rem;
      margin-bottom: 1rem;
      background: linear-gradient(135deg, var(--primary-blue), var(--accent-green));
      -webkit-background-clip: text;
      -webkit-text-fill-color: transparent;
      background-clip: text;
    }

    .subtitle {
      font-size: 1.2rem;
      color: var(--gray-600);
      margin-bottom: 2rem;
    }

    .progress-bar {
      width: 100%;
      height: 8px;
      background: var(--gray-200);
      border-radius: 4px;
      overflow: hidden;
      margin-bottom: 1rem;
    }

    .progress-fill {
      height: 100%;
      background: linear-gradient(135deg, var(--primary-blue), var(--accent-green));
      width: 12.5%;
      transition: width 0.3s ease;
    }

    .progress-text {
      color: var(--gray-600);
      font-size: 0.9rem;
      margin: 0;
    }

    .quiz-container {
      margin-bottom: 2rem;
    }

    .question {
      display: none;
      animation: fadeIn 0.3s ease;
    }

    .question.active {
      display: block;
    }

    .question h2 {
      font-size: 1.5rem;
      margin-bottom: 2rem;
      text-align: center;
      color: var(--gray-900);
    }

    .options {
      display: grid;
      gap: 1rem;
      max-width: 600px;
      margin: 0 auto;
    }

    .option {
      cursor: pointer;
      border: 2px solid var(--gray-200);
      border-radius: 12px;
      padding: 0;
      transition: all 0.3s ease;
      display: block;
    }

    .option:hover {
      border-color: var(--primary-blue);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(0,0,0,0.1);
    }

    .option input[type="radio"] {
      display: none;
    }

    .option input[type="radio"]:checked + .option-content {
      background: linear-gradient(135deg, var(--primary-blue), var(--primary-blue-light));
      color: white;
      border-color: var(--primary-blue);
    }

    .option-content {
      display: flex;
      align-items: center;
      padding: 1.5rem;
      gap: 1rem;
      transition: all 0.3s ease;
    }

    .option-icon {
      font-size: 2rem;
      min-width: 50px;
      text-align: center;
    }

    .option-text strong {
      display: block;
      font-size: 1.1rem;
      margin-bottom: 0.25rem;
    }

    .option-text p {
      margin: 0;
      font-size: 0.9rem;
      opacity: 0.8;
    }

    .navigation {
      display: flex;
      justify-content: space-between;
      align-items: center;
      gap: 1rem;
    }

    .results-section {
      margin-top: 2rem;
      padding: 0;
      background: transparent;
      border-radius: 0;
    }

    .results-content {
      max-width: 800px;
      margin: 0 auto;
    }

    .main-results {
      background: white;
      border-radius: 16px;
      padding: 2rem;
      box-shadow: 0 4px 20px rgba(0,0,0,0.1);
    }

    .recommendation {
      background: linear-gradient(135deg, #ffffff 0%, #f8faff 100%);
      border-radius: 12px;
      padding: 2rem;
      margin-bottom: 2rem;
      border: 1px solid rgba(59, 130, 246, 0.2);
      box-shadow: 0 2px 12px rgba(59, 130, 246, 0.1);
    }

    .recommendation h3 {
      color: var(--primary-blue);
      margin-bottom: 1rem;
      font-size: 1.5rem;
      display: flex;
      align-items: center;
      gap: 0.5rem;
    }

    .recommendation-score {
      display: inline-block;
      background: linear-gradient(135deg, var(--accent-green), #10b981);
      color: white;
      padding: 0.5rem 1rem;
      border-radius: 20px;
      font-weight: 600;
      margin-bottom: 1rem;
      font-size: 0.9rem;
    }

    .features-list {
      list-style: none;
      padding: 0;
      margin: 1.5rem 0;
      display: grid;
      gap: 0.8rem;
    }

    .features-list li {
      padding: 0.8rem 1rem;
      background: rgba(59, 130, 246, 0.05);
      border-radius: 8px;
      border-left: 3px solid var(--accent-green);
      display: flex;
      align-items: center;
      gap: 0.8rem;
    }

    .features-list li:before {
      content: "?";
      font-size: 1.1rem;
      margin-right: 0;
    }

    .results-header {
      text-align: center;
      margin-bottom: 2rem;
      padding-bottom: 1.5rem;
      border-bottom: 2px solid rgba(59, 130, 246, 0.1);
    }

    .results-header h2 {
      font-size: 2rem;
      color: var(--primary-blue);
      margin-bottom: 0.5rem;
    }

    .results-header p {
      color: var(--gray-600);
      font-size: 1.1rem;
    }

    @keyframes fadeIn {
      from { opacity: 0; transform: translateY(20px); }
      to { opacity: 1; transform: translateY(0); }
    }

    @media (max-width: 768px) {
      .diagnostic-header h1 {
        font-size: 2rem;
      }
      
      .option-content {
        padding: 1rem;
      }
      
      .navigation {
        flex-direction: column;
      }
    }

    /* Styles pour les checkboxes (question effets secondaires) */
    .effects-checklist {
      display: grid;
      grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
      gap: 1rem;
    }

    .checkbox-option input[type="checkbox"] {
      position: absolute;
      opacity: 0;
      cursor: pointer;
    }

    .checkbox-option .option-content {
      transition: all 0.3s ease;
      border: 2px solid var(--gray-200);
    }

    .checkbox-option input[type="checkbox"]:checked + .option-content {
      border-color: var(--primary-blue);
      background: rgba(59, 130, 246, 0.05);
      transform: translateY(-2px);
      box-shadow: 0 4px 12px rgba(59, 130, 246, 0.15);
    }

    .checkbox-option input[type="checkbox"]:checked + .option-content::after {
      content: "?";
      position: absolute;
      top: 10px;
      right: 15px;
      color: var(--primary-blue);
      font-weight: bold;
      font-size: 1.2rem;
    }

    /* Styles pour les solutions d'effets secondaires */
    .effect-solution {
      background: #f8f9fa;
      border-left: 4px solid var(--accent-green);
      padding: 1.5rem;
      margin: 1.5rem 0;
      border-radius: 8px;
    }

    .effect-solution h4 {
      color: var(--primary-blue);
      margin-bottom: 1rem;
      font-size: 1.1rem;
    }

    .effect-solution ul {
      margin: 0;
      padding-left: 1.5rem;
    }

    .effect-solution li {
      margin-bottom: 0.5rem;
      line-height: 1.5;
    }

    .general-advice {
      background: #e3f2fd;
      border-left: 4px solid var(--primary-blue);
      padding: 1.5rem;
      margin: 2rem 0;
      border-radius: 8px;
    }

    .general-advice h4 {
      color: var(--primary-blue);
      margin-bottom: 1rem;
    }
  </style>

  <script>
    let currentQuestion = 1;
    const totalQuestions = 9;
    const answers = {};
    let selectedEffets = [];

    // Navigation functions
    function showQuestion(n) {
      document.querySelectorAll('.question').forEach(q => q.classList.remove('active'));
      
      // Logique conditionnelle pour la question 9 (effets secondaires)
      if (n === 9 && answers.q1 !== 'effets-secondaires') {
        // Skip question 9 si l'objectif n'est pas "rÔøΩduire les effets secondaires"
        if (currentQuestion < n) {
          currentQuestion = totalQuestions + 1; // Go to results
          showResults();
          return;
        } else {
          currentQuestion = 8;
          showQuestion(8);
          return;
        }
      }
      
      // Si c'est la question 9 et que l'objectif est "effets-secondaires", s'assurer qu'elle est visible
      if (n === 9 && answers.q1 === 'effets-secondaires') {
        document.getElementById('effets-secondaires-question').style.display = 'block';
      }
      
      document.querySelector(`[data-question="${n}"]`).classList.add('active');
      
      // Gestion sp√©ciale de l'affichage du num√©ro pour le parcours effets secondaires
      if (n === 9 && answers.q1 === 'effets-secondaires') {
        document.getElementById('question-number').textContent = 'Question finale';
        document.getElementById('progress-fill').style.width = '100%';
      } else {
        document.getElementById('question-number').textContent = n;
        document.getElementById('progress-fill').style.width = `${(n / totalQuestions) * 100}%`;
      }
      
      document.getElementById('prev-btn').style.display = n === 1 ? 'none' : 'inline-block';
      
      // Gestion sp√©ciale des boutons pour la question 9 (effets secondaires)
      if (n === 9 && answers.q1 === 'effets-secondaires') {
        // Pour le parcours effets secondaires, la question 9 est la derni√®re - afficher le bouton "Voir les r√©sultats"
        document.getElementById('next-btn').style.display = 'none';
        document.getElementById('results-btn').style.display = 'inline-block';
        document.getElementById('results-btn').textContent = 'Voir mes Solutions üõ†Ô∏è';
      } else {
        // Pour toutes les autres questions, afficher le bouton Suivant sauf si on est √† la derni√®re question du parcours normal
        document.getElementById('next-btn').style.display = (n >= totalQuestions) ? 'none' : 'inline-block';
        document.getElementById('results-btn').style.display = 'none';
        document.getElementById('results-btn').textContent = 'Voir mes R√©sultats üéØ';
      }
    }

    function nextQuestion() {
      let currentAnswer;
      
      // Gestion sp√©ciale pour la question 9 (choix multiples)
      if (currentQuestion === 9) {
        const checkedEffets = document.querySelectorAll('input[name="effets"]:checked');
        if (checkedEffets.length === 0) {
          alert('Veuillez s√©lectionner au moins un effet secondaire.');
          return;
        }
        selectedEffets = Array.from(checkedEffets).map(input => input.value);
        answers[`q${currentQuestion}`] = selectedEffets;
      } else {
        currentAnswer = document.querySelector(`input[name="q${currentQuestion}"]:checked`);
        if (!currentAnswer) {
          alert('Veuillez s√©lectionner une r√©ponse avant de continuer.');
          return;
        }
        answers[`q${currentQuestion}`] = currentAnswer.value;
      }
      
      // Logique sp√©ciale : si on vient de r√©pondre √† la question 1 avec "effets-secondaires"
      // on va directement √† la question 9 (s√©lection des effets)
      if (currentQuestion === 1 && answers.q1 === 'effets-secondaires') {
        currentQuestion = 9;
        showQuestion(9);
        return;
      }
      
      // Logique sp√©ciale : si on est √† la question 8 et qu'on n'a pas s√©lectionn√© "effets secondaires"
      // on va directement aux r√©sultats en sautant la question 9
      if (currentQuestion === 8 && answers.q1 !== 'effets-secondaires') {
        showResults();
        return;
      }
      
      if (currentQuestion < totalQuestions) {
        currentQuestion++;
        showQuestion(currentQuestion);
      } else {
        // Si on est √† la derni√®re question, aller directement aux r√©sultats
        showResults();
      }
    }

    function showResults() {
      console.log('showResults called with answers:', answers);
      document.getElementById('quiz-container').style.display = 'none';
      document.querySelector('.navigation').style.display = 'none';
      document.getElementById('results-section').style.display = 'block';
      calculateResults();
    }

    function prevQuestion() {
      if (currentQuestion > 1) {
        // Si on est √† la question 9 et qu'on vient du parcours "effets-secondaires"
        // retourner √† la question 1
        if (currentQuestion === 9 && answers.q1 === 'effets-secondaires') {
          currentQuestion = 1;
          showQuestion(1);
          return;
        }
        
        currentQuestion--;
        showQuestion(currentQuestion);
      }
    }

    function calculateResults() {
      console.log('calculateResults called');
      // Cas spÔøΩcial : si l'objectif est de rÔøΩduire les effets secondaires
      if (answers.q1 === 'effets-secondaires') {
        console.log('Showing effects side solutions');
        showEffetsSideSolutions();
        return;
      }

      // Pour les autres cas, rÔøΩcupÔøΩrer la derniÔøΩre rÔøΩponse si nÔøΩcessaire
      if (currentQuestion <= totalQuestions) {
        const currentAnswer = document.querySelector(`input[name="q${currentQuestion}"]:checked`);
        if (!currentAnswer) {
          alert('Veuillez sÔøΩlectionner une rÔøΩponse avant de voir les r√©sultats.');
          return;
        }
        answers[`q${currentQuestion}`] = currentAnswer.value;
      }

      console.log('Calculating scores with answers:', answers);

      // Logic de recommendation pour les nouveaux utilisateurs
      let ozempicScore = 0;
      let wegovyScore = 0;

      // Q1: Objectif
      if (answers.q1 === 'diabete') ozempicScore += 3;
      if (answers.q1 === 'perte-poids') wegovyScore += 3;
      if (answers.q1 === 'les-deux') { ozempicScore += 2; wegovyScore += 2; }

      // Q2: IMC
      if (answers.q2 === 'surpoids') ozempicScore += 1;
      if (answers.q2 === 'obesite-1') { ozempicScore += 2; wegovyScore += 2; }
      if (answers.q2 === 'obesite-2') wegovyScore += 3;

      // Q3: Exp√©rience
      if (answers.q3 === 'nombreuses') wegovyScore += 2;
      if (answers.q3 === 'glp1-deja') { 
        // Si d√©j√† eu GLP-1, favoriser une approche diffÔøΩrente ou un suivi spÔøΩcialisÔøΩ
        ozempicScore += 1; 
        wegovyScore += 1; 
      }

      // Q4: Budget
      if (answers.q4 === 'budget-limite') ozempicScore += 1;
      if (answers.q4 === 'budget-eleve') wegovyScore += 1;

      // Q5: Urgence
      if (answers.q5 === 'rapide') wegovyScore += 2;

      // Q6: TolÔøΩrance
      if (answers.q6 === 'sensible') ozempicScore += 1;
      if (answers.q6 === 'bonne') wegovyScore += 1;

      // Q7: Suivi
      if (answers.q7 === 'regulier') { ozempicScore += 2; wegovyScore += 2; }
      if (answers.q7 === 'aucun') ozempicScore -= 1;

      // Q8: SantÔøΩ
      if (answers.q8 === 'importants') ozempicScore += 1;

      console.log('Scores calculated - Ozempic:', ozempicScore, 'Wegovy:', wegovyScore);
      showTraitementResults(ozempicScore, wegovyScore);
    }

    function showEffetsSideSolutions() {
      document.getElementById('quiz-container').style.display = 'none';
      document.querySelector('.navigation').style.display = 'none';
      document.getElementById('results-section').style.display = 'block';

      let solutions = '';
      const effets = selectedEffets;

      solutions += `
        <div class="recommendation">
          <div class="recommendation-score">Solutions personnalis√©es</div>
          <h3>üõ†Ô∏è Conseils pour r√©duire vos effets secondaires</h3>
          <p>Bas√© sur les effets que vous ressentez, voici nos recommandations :</p>
      `;

      // Solutions sp√©cifiques par effet
      if (effets.includes('nausees') || effets.includes('vomissements')) {
        solutions += `
          <div class="effect-solution">
            <h4>ü§¢ Naus√©es et vomissements</h4>
            <ul>
              <li>Prenez votre injection apr√®s un repas l√©ger</li>
              <li>√âvitez les aliments gras et √©pic√©s</li>
              <li>Mangez de plus petites portions, plus fr√©quemment</li>
              <li>Consid√©rez du gingembre (tisane ou g√©lules)</li>
              <li>Discutez d'une r√©duction temporaire de dose avec votre m√©decin</li>
            </ul>
          </div>
        `;
      }

      if (effets.includes('diarrhee')) {
        solutions += `
          <div class="effect-solution">
            <h4>üí© Diarrh√©e</h4>
            <ul>
              <li>Augmentez les fibres solubles (avoine, bananes)</li>
              <li>√âvitez les √©dulcorants artificiels</li>
              <li>Hydratez-vous davantage</li>
              <li>Envisagez des probiotiques</li>
              <li>R√©duisez temporairement les graisses dans l'alimentation</li>
            </ul>
          </div>
        `;
      }

      if (effets.includes('constipation')) {
        solutions += `
          <div class="effect-solution">
            <h4>üöΩ Constipation</h4>
            <ul>
              <li>Augmentez votre consommation de fibres progressivement</li>
              <li>Buvez plus d'eau (2L minimum par jour)</li>
              <li>Marchez 20-30 minutes apr√®s les repas</li>
              <li>Consid√©rez le psyllium ou des prunes</li>
              <li>√âvitez de forcer, consultez si √ßa persiste</li>
            </ul>
          </div>
        `;
      }

      if (effets.includes('fatigue')) {
        solutions += `
          <div class="effect-solution">
            <h4>üò¥ Fatigue</h4>
            <ul>
              <li>Assurez-vous de consommer suffisamment de calories</li>
              <li>Compl√©ment en vitamines B et fer (apr√®s analyse)</li>
              <li>Respectez un rythme de sommeil r√©gulier</li>
              <li>Exercice doux (marche, yoga)</li>
              <li>√âvitez les chutes drastiques de sucre</li>
            </ul>
          </div>
        `;
      }

      if (effets.includes('chute-cheveux')) {
        solutions += `
          <div class="effect-solution">
            <h4>üíá Chute de cheveux</h4>
            <ul>
              <li>Compl√©ment en biotine et vitamines du groupe B</li>
              <li>Massage du cuir chevelu quotidien</li>
              <li>√âvitez les coiffures tir√©es et la chaleur excessive</li>
              <li>Assurez-vous d'un apport suffisant en prot√©ines</li>
              <li>Consultez un dermatologue si la chute persiste</li>
            </ul>
          </div>
        `;
      }

      if (effets.includes('peau-relachee')) {
        solutions += `
          <div class="effect-solution">
            <h4>üë¥ Peau rel√¢ch√©e</h4>
            <ul>
              <li>Hydratation intense avec des cr√®mes raffermissantes</li>
              <li>Massage quotidien avec des huiles (rose musqu√©e)</li>
              <li>Exercices de renforcement musculaire</li>
              <li>Ralentir la perte de poids (1-2kg/mois max)</li>
              <li>Consid√©rer des soins esth√©tiques (radiofr√©quence, etc.)</li>
            </ul>
          </div>
        `;
      }

      if (effets.includes('carences')) {
        solutions += `
          <div class="effect-solution">
            <h4>üíä Carences nutritionnelles</h4>
            <ul>
              <li>Bilan sanguin complet (vitamines B12, D, fer, folates)</li>
              <li>Compl√©ment multivitamin√© adapt√©</li>
              <li>Privil√©gier les aliments denses en nutriments</li>
              <li>Consultation avec un nutritionniste</li>
              <li>Suppl√©mentation cibl√©e selon les carences d√©tect√©es</li>
            </ul>
          </div>
        `;
      }

      solutions += `
          <div class="general-advice">
            <h4>üí° Conseils g√©n√©raux</h4>
            <ul>
              <li><strong>Communiquez avec votre m√©decin :</strong> N'h√©sitez pas √† discuter d'un ajustement de dose</li>
              <li><strong>Progressivit√© :</strong> La plupart des effets s'att√©nuent apr√®s 4-8 semaines</li>
              <li><strong>Suivi r√©gulier :</strong> Tenez un journal de vos sympt√¥mes</li>
              <li><strong>Patience :</strong> L'adaptation peut prendre du temps</li>
            </ul>
          </div>
          
          <div style="background: linear-gradient(135deg, #f8faff 0%, #e8f4fd 100%); padding: 2rem; border-radius: 12px; margin: 2rem 0; border: 1px solid rgba(59, 130, 246, 0.2);">
            <h4 style="color: var(--primary-blue); margin-bottom: 1.5rem; text-align: center; font-size: 1.3rem;">üõí Produits pour soulager les effets secondaires</h4>
            <div style="display: grid; gap: 1.5rem;">
              <div style="background: white; padding: 1.5rem; border-radius: 10px; border-left: 4px solid var(--accent-green); box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                  <div style="width: 60px; height: 60px; background: #f8f9fa; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">üß¥</div>
                  <div>
                    <h5 style="margin: 0 0 0.3rem 0; color: var(--primary-blue); font-size: 1.1rem;">Talika Bust Phytoserum</h5>
                    <p style="margin: 0; font-size: 0.9rem; color: var(--gray-600);">Raffermit la peau rel√¢ch√©e ‚Ä¢ Id√©al apr√®s amaigrissement GLP-1</p>
                  </div>
                </div>
                <div style="margin-bottom: 1rem;">
                  <span style="background: var(--accent-green); color: white; padding: 0.3rem 0.8rem; border-radius: 15px; font-size: 0.8rem; font-weight: 600;">-10% avec GLP1</span>
                  <span style="margin-left: 0.5rem; color: var(--gray-500); font-size: 0.9rem;">49,90‚Ç¨ au lieu de 55,45‚Ç¨</span>
                </div>
                <a href="/produits/talika-bust-phytoserum/" style="display: inline-block; background: var(--primary-blue); color: white; padding: 0.8rem 1.5rem; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 0.9rem; transition: all 0.3s ease;">
                  Voir le produit üîó
                </a>
              </div>
              <div style="background: white; padding: 1.5rem; border-radius: 10px; border-left: 4px solid var(--accent-green); box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
                <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                  <div style="width: 60px; height: 60px; background: #f8f9fa; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">üí™</div>
                  <div>
                    <h5 style="margin: 0 0 0.3rem 0; color: var(--primary-blue); font-size: 1.1rem;">Nutrimuscle Whey Native</h5>
                    <p style="margin: 0; font-size: 0.9rem; color: var(--gray-600);">√âvite la fonte musculaire ‚Ä¢ Compense la r√©duction d'app√©tit</p>
                  </div>
                </div>
                <div style="margin-bottom: 1rem;">
                  <span style="background: var(--accent-green); color: white; padding: 0.3rem 0.8rem; border-radius: 15px; font-size: 0.8rem; font-weight: 600;">-5% avec NMA_GLP1</span>
                  <span style="margin-left: 0.5rem; color: var(--gray-500); font-size: 0.9rem;">59,90‚Ç¨ au lieu de 63,05‚Ç¨</span>
                </div>
                <a href="https://www.nutrimuscle.com/whey-native?ref=NMA_GLP1" target="_blank" rel="noopener" style="display: inline-block; background: var(--primary-blue); color: white; padding: 0.8rem 1.5rem; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 0.9rem; transition: all 0.3s ease;">
                  Commander chez Nutrimuscle üîó
                </a>
              </div>
            </div>
            <p style="margin-top: 1rem; text-align: center; font-size: 0.8rem; color: var(--gray-500);">
              <em>ü§ù Liens d'affiliation ‚Ä¢ Nous touchons une commission sans surco√ªt pour vous</em>
            </p>
          </div>
          
          <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; margin-top: 2rem;">
            <h4 style="color: #dc3545; margin-bottom: 1rem;">‚ö†Ô∏è Important</h4>
            <p style="margin: 0; font-size: 0.9rem;">Ces conseils sont informatifs. Consultez toujours votre m√©decin avant de modifier votre traitement ou d'arr√™ter des m√©dicaments.</p>
          </div>

          <div style="margin-top: 2rem;">
            <a href="/effets-secondaires-glp1/" class="btn btn-primary">Guide complet des effets secondaires</a>
            <a href="/medecins-glp1-france/" class="btn btn-outline">Trouver un m√©decin sp√©cialis√©</a>
          </div>
        </div>
      `;

      document.getElementById('results-content').innerHTML = solutions;
    }

    function showTraitementResults(ozempicScore, wegovyScore) {
      console.log('showTraitementResults called with scores:', { ozempicScore, wegovyScore });
      document.getElementById('quiz-container').style.display = 'none';
      document.querySelector('.navigation').style.display = 'none';
      document.getElementById('results-section').style.display = 'block';

      let recommendation = '';
      
      // Cas spÔøΩcial : personne ayant d√©j√† fait un traitement GLP-1
      if (answers.q3 === 'glp1-deja') {
        console.log('Showing recommendation for experienced user');
        recommendation = `
          <div class="recommendation">
            <div class="recommendation-score">Recommandation : Nouveau D√©part</div>
            <h3>üîÑ Vous avez d√©j√† essay√© un GLP-1 : Optimisons votre approche</h3>
            <p>Ayant d√©j√† une exp√©rience avec les traitements GLP-1, voici nos recommandations :</p>
            
            <h4>üîç Analysez votre exp√©rience pr√©c√©dente :</h4>
            <ul class="features-list">
              <li>Quel √©tait le traitement utilis√© ? (Ozempic, Wegovy, Saxenda...)</li>
              <li>Pourquoi avez-vous arr√™t√© ? (Effets secondaires, co√ªt, efficacit√©...)</li>
              <li>Avez-vous eu des r√©sultats ? Combien de poids perdu ?</li>
              <li>Combien de temps depuis l'arr√™t ?</li>
            </ul>

            <h4>üéØ Nouvelles strat√©gies √† consid√©rer :</h4>
            <ul class="features-list">
              <li><strong>Changement de mol√©cule :</strong> Essayer Mounjaro (tirz√©patide) ou Rybelsus (oral)</li>
              <li><strong>Dosage diff√©rent :</strong> D√©marrage plus progressif pour r√©duire les effets secondaires</li>
              <li><strong>Accompagnement renforc√© :</strong> Suivi nutritionnel et psychologique</li>
              <li><strong>Timing optimis√© :</strong> P√©riode de l'ann√©e et contexte personnel propices</li>
            </ul>

            <h4>‚ö†Ô∏è Points d'attention :</h4>
            <ul class="features-list">
              <li>Discutez avec votre m√©decin des raisons de l'arr√™t pr√©c√©dent</li>
              <li>V√©rifiez votre situation m√©dicale actuelle (bilan sanguin)</li>
              <li>Pr√©parez un plan pour √©viter les m√™mes difficult√©s</li>
              <li>Consid√©rez un centre sp√©cialis√© en ob√©sit√© pour un suivi expert</li>
            </ul>

            <div style="margin-top: 2rem;">
              <a href="/medicaments-glp1/" class="btn btn-primary">Comparer tous les traitements</a>
              <a href="/medecins-glp1-france/" class="btn btn-outline">Trouver un m√©decin sp√©cialis√©</a>
              <a href="/effets-secondaires-glp1/" class="btn btn-secondary">G√©rer les effets secondaires</a>
            </div>
          </div>
        `;
      } else if (ozempicScore > wegovyScore) {
        recommendation = `
          <div class="recommendation">
            <div class="recommendation-score">Recommandation : Ozempic</div>
            <h3>üíâ Ozempic semble le plus adapt√© √† votre profil</h3>
            <p>Bas√© sur vos r√©ponses, Ozempic pr√©sente les avantages suivants pour vous :</p>
            <ul class="features-list">
              <li>Traitement du diab√®te ET perte de poids</li>
              <li>Co√ªt g√©n√©ralement plus abordable</li>
              <li>Dosage progressif pour minimiser les effets secondaires</li>
              <li>Prise en charge possible par l'Assurance Maladie</li>
            </ul>
            <p><strong>Prochaines √©tapes :</strong></p>
            <p>1. Consultez votre m√©decin traitant ou un endocrinologue<br>
            2. Faites un bilan sanguin complet<br>
            3. Discutez des contre-indications √©ventuelles</p>
            <div style="margin-top: 2rem;">
              <a href="/medicaments-glp1/ozempic-posologie/" class="btn btn-primary">En savoir plus sur Ozempic</a>
              <a href="/medecins-glp1-france/" class="btn btn-outline">Trouver un m√©decin</a>
            </div>
          </div>
        `;
      } else if (wegovyScore > ozempicScore) {
        recommendation = `
          <div class="recommendation">
            <div class="recommendation-score">Recommandation : Wegovy</div>
            <h3>üíâ Wegovy semble le plus adapt√© √† votre profil</h3>
            <p>Bas√© sur vos r√©ponses, Wegovy pr√©sente les avantages suivants pour vous :</p>
            <ul class="features-list">
              <li>Sp√©cialement con√ßu pour la perte de poids</li>
              <li>Dosage plus √©lev√© pour des r√©sultats plus rapides</li>
              <li>Id√©al pour l'ob√©sit√© importante</li>
              <li>Accompagnement nutritionnel recommand√©</li>
            </ul>
            <p><strong>Prochaines √©tapes :</strong></p>
            <p>1. Consultez un m√©decin sp√©cialis√© en ob√©sit√©<br>
            2. V√©rifiez votre √©ligibilit√© (IMC > 30)<br>
            3. Pr√©parez un plan nutritionnel adapt√©</p>
            <div style="margin-top: 2rem;">
              <a href="/glp1-cout/acheter-wegovy-en-france/" class="btn btn-primary">En savoir plus sur Wegovy</a>
              <a href="/medecins-glp1-france/" class="btn btn-outline">Trouver un m√©decin</a>
            </div>
          </div>
        `;
      } else {
        recommendation = `
          <div class="recommendation">
            <div class="recommendation-score">Les deux sont adapt√©s</div>
            <h3>üíâ Ozempic et Wegovy sont tous deux adapt√©s</h3>
            <p>Votre profil correspond aux deux traitements. Le choix d√©pendra de :</p>
            <ul class="features-list">
              <li>Votre budget et la prise en charge</li>
              <li>Vos pr√©f√©rences en termes de dosage</li>
              <li>L'avis de votre m√©decin</li>
              <li>Votre tol√©rance aux effets secondaires</li>
            </ul>
            <p><strong>Nous recommandons de commencer par Ozempic</strong> car il est souvent mieux rembours√© et permet une adaptation progressive.</p>
            <div style="margin-top: 2rem;">
              <a href="/medicaments-glp1/" class="btn btn-primary">Comparer Ozempic vs Wegovy</a>
              <a href="/medecins-glp1-france/" class="btn btn-outline">Trouver un m√©decin</a>
            </div>
          </div>
        `;
      }

      recommendation += `
        <div style="background: linear-gradient(135deg, #f8faff 0%, #e8f4fd 100%); padding: 2rem; border-radius: 12px; margin: 2rem 0; border: 1px solid rgba(59, 130, 246, 0.2);">
          <h4 style="color: var(--primary-blue); margin-bottom: 1.5rem; text-align: center; font-size: 1.3rem;">üõí Optimisez votre traitement</h4>
          <div style="display: grid; gap: 1.5rem;">
            <div style="background: white; padding: 1.5rem; border-radius: 10px; border-left: 4px solid var(--accent-green); box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
              <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                <div style="width: 60px; height: 60px; background: #f8f9fa; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">üß¥</div>
                <div>
                  <h5 style="margin: 0 0 0.3rem 0; color: var(--primary-blue); font-size: 1.1rem;">Talika Bust Phytoserum</h5>
                  <p style="margin: 0; font-size: 0.9rem; color: var(--gray-600);">Raffermit la peau rel√¢ch√©e apr√®s perte de poids</p>
                </div>
              </div>
              <div style="margin-bottom: 1rem;">
                <span style="background: var(--accent-green); color: white; padding: 0.3rem 0.8rem; border-radius: 15px; font-size: 0.8rem; font-weight: 600;">-10% avec GLP1</span>
                <span style="margin-left: 0.5rem; color: var(--gray-500); font-size: 0.9rem;">49,90‚Ç¨ au lieu de 55,45‚Ç¨</span>
              </div>
              <a href="/produits/talika-bust-phytoserum/" style="display: inline-block; background: var(--primary-blue); color: white; padding: 0.8rem 1.5rem; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 0.9rem; transition: all 0.3s ease;">
                Voir le produit üîó
              </a>
            </div>
            <div style="background: white; padding: 1.5rem; border-radius: 10px; border-left: 4px solid var(--accent-green); box-shadow: 0 2px 8px rgba(0,0,0,0.1);">
              <div style="display: flex; align-items: center; gap: 1rem; margin-bottom: 1rem;">
                <div style="width: 60px; height: 60px; background: #f8f9fa; border-radius: 8px; display: flex; align-items: center; justify-content: center; font-size: 1.5rem;">üí™</div>
                <div>
                  <h5 style="margin: 0 0 0.3rem 0; color: var(--primary-blue); font-size: 1.1rem;">Nutrimuscle Whey Native</h5>
                  <p style="margin: 0; font-size: 0.9rem; color: var(--gray-600);">Maintient la masse musculaire pendant la perte de poids</p>
                </div>
              </div>
              <div style="margin-bottom: 1rem;">
                <span style="background: var(--accent-green); color: white; padding: 0.3rem 0.8rem; border-radius: 15px; font-size: 0.8rem; font-weight: 600;">-5% avec NMA_GLP1</span>
                <span style="margin-left: 0.5rem; color: var(--gray-500); font-size: 0.9rem;">59,90‚Ç¨ au lieu de 63,05‚Ç¨</span>
              </div>
              <a href="https://www.nutrimuscle.com/whey-native?ref=NMA_GLP1" target="_blank" rel="noopener" style="display: inline-block; background: var(--primary-blue); color: white; padding: 0.8rem 1.5rem; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 0.9rem; transition: all 0.3s ease;">
                Commander chez Nutrimuscle üîó
              </a>
            </div>
          </div>
          <p style="margin-top: 1rem; text-align: center; font-size: 0.8rem; color: var(--gray-500);">
            <em>ü§ù Liens d'affiliation ‚Ä¢ Nous touchons une commission sans surco√ªt pour vous</em>
          </p>
        </div>
      `;

      recommendation += `
        <div style="background: #f8f9fa; padding: 1.5rem; border-radius: 8px; margin-top: 2rem;">
          <h4 style="color: #dc3545; margin-bottom: 1rem;">‚ö†Ô∏è Avertissement Important</h4>
          <p style="margin: 0; font-size: 0.9rem;">Ce diagnostic est informatif et ne remplace pas une consultation m√©dicale. Seul un professionnel de sant√© peut d√©terminer si un traitement GLP-1 vous convient et vous le prescrire l√©galement.</p>
        </div>
      `;

      console.log('Setting innerHTML for results-content with recommendation length:', recommendation.length);
      const resultsElement = document.getElementById('results-content');
      console.log('Results element found:', resultsElement);
      
      if (resultsElement) {
        resultsElement.innerHTML = recommendation;
        console.log('Results content set successfully');
      } else {
        console.error('Results element not found!');
      }
    }

    // Event listeners
    document.getElementById('next-btn').addEventListener('click', nextQuestion);
    document.getElementById('prev-btn').addEventListener('click', prevQuestion);
    document.getElementById('results-btn').addEventListener('click', calculateResults);

    // Auto-advance on selection (sauf pour la question 9 qui utilise des checkboxes)
    document.addEventListener('change', function(e) {
      if (e.target.type === 'radio' && currentQuestion !== 9) {
        setTimeout(nextQuestion, 500);
      }
    });
  </script>

  <!-- Section Recommandations -->
  <section class="recommendations-section" style="margin-top: 3rem; padding: 2rem; background: linear-gradient(135deg, #667eea 0%, #764ba2 100%); border-radius: 16px; color: white;">
    <div class="container">
      <h2 style="text-align: center; margin-bottom: 2rem; font-size: 2.5rem;">üéØ Nos Recommandations Expert</h2>
      
      <div style="display: grid; grid-template-columns: repeat(auto-fit, minmax(300px, 1fr)); gap: 2rem; margin-bottom: 2rem;">
        
        <!-- Consultation Expert -->
        <div style="background: rgba(255,255,255,0.1); padding: 1.5rem; border-radius: 12px; backdrop-filter: blur(10px);">
          <h3 style="margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
            üë®‚Äç‚öïÔ∏è <span>Consultation Sp√©cialis√©e</span>
          </h3>
          <p style="margin-bottom: 1rem; opacity: 0.9;">
            B√©n√©ficiez de l'expertise de nos endocrinologues partenaires pour une prescription personnalis√©e et un suivi m√©dical optimal.
          </p>
          <a href="/guides/experts/" style="display: inline-block; background: #fff; color: #667eea; padding: 0.75rem 1.5rem; border-radius: 8px; text-decoration: none; font-weight: 600; transition: transform 0.2s;">
            Consulter un Expert
          </a>
        </div>

        <!-- Guide Complet -->
        <div style="background: rgba(255,255,255,0.1); padding: 1.5rem; border-radius: 12px; backdrop-filter: blur(10px);">
          <h3 style="margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
            üìö <span>Guide Complet GLP-1</span>
          </h3>
          <p style="margin-bottom: 1rem; opacity: 0.9;">
            T√©l√©chargez notre guide complet (PDF 45 pages) avec toutes les informations essentielles sur les traitements GLP-1.
          </p>
          <a href="/guides/guide-beaute-perte-de-poids-glp1/" style="display: inline-block; background: #fff; color: #667eea; padding: 0.75rem 1.5rem; border-radius: 8px; text-decoration: none; font-weight: 600; transition: transform 0.2s;">
            T√©l√©charger le Guide
          </a>
        </div>

        <!-- Comparateur Prix -->
        <div style="background: rgba(255,255,255,0.1); padding: 1.5rem; border-radius: 12px; backdrop-filter: blur(10px);">
          <h3 style="margin-bottom: 1rem; display: flex; align-items: center; gap: 0.5rem;">
            üí∞ <span>Comparateur Prix</span>
          </h3>
          <p style="margin-bottom: 1rem; opacity: 0.9;">
            Comparez les prix d'Ozempic, Wegovy et Saxenda. Trouvez les meilleures offres et solutions de remboursement.
          </p>
          <a href="/collections/glp1-cout/" style="display: inline-block; background: #fff; color: #667eea; padding: 0.75rem 1.5rem; border-radius: 8px; text-decoration: none; font-weight: 600; transition: transform 0.2s;">
            Comparer les Prix
          </a>
        </div>
      </div>

      <!-- Call to Action Principal -->
      <div style="text-align: center; background: rgba(255,255,255,0.15); padding: 2rem; border-radius: 12px; backdrop-filter: blur(10px);">
        <h3 style="margin-bottom: 1rem; font-size: 1.8rem;">üöÄ Pr√™t √† commencer votre transformation ?</h3>
        <p style="margin-bottom: 1.5rem; font-size: 1.1rem; opacity: 0.9;">
          Rejoignez les milliers de personnes qui ont d√©j√† transform√© leur vie avec les traitements GLP-1.
        </p>
        <div style="display: flex; gap: 1rem; justify-content: center; flex-wrap: wrap;">
          <a href="/guides/experts/" style="background: #28a745; color: white; padding: 1rem 2rem; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 1.1rem; transition: transform 0.2s;">
            üéØ Consultation Expert
          </a>
          <a href="/temoignages/avant-apres-glp1/" style="background: transparent; border: 2px solid white; color: white; padding: 1rem 2rem; border-radius: 8px; text-decoration: none; font-weight: 600; font-size: 1.1rem; transition: all 0.2s;">
            üìà Voir les R√©sultats
          </a>
        </div>
      </div>
    </div>
  </section>

</BaseLayout>



